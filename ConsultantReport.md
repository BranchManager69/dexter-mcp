# Analysis of ChatGPT Connector OAuth Issue in Dexter-MCP

## Background: Dexter Connectors for ChatGPT and Claude

Dexter’s **connectors** allow platforms like OpenAI’s ChatGPT and Anthropic’s Claude to integrate with Dexter’s services via the Model Context Protocol (MCP). These connectors implement an OAuth flow so that a user can authorize ChatGPT or Claude to access their Dexter account/tools. In the current architecture, the **dexter-api** service defines core tool logic, while the **dexter-mcp** service handles connection endpoints and transports (including OAuth flows), as the monorepo was split into these components. The front-end (dexter-fe) hosts the UI (including the OAuth login pages) and is less relevant here.

Recently, significant changes were made to how the OAuth endpoints are served: the OAuth routes moved from the API host (dexter-api) to the MCP host (dexter-mcp) to better isolate the connector logic. This means URLs and client configurations for the connectors have changed, which affects how ChatGPT and Claude connect. Understanding these changes is key to diagnosing why the ChatGPT connector’s OAuth is failing while the Claude connector works.

## Issue Overview: ChatGPT OAuth Failing vs Claude Working

According to the GitHub issue **“Connector OAuth metadata mismatch blocks ChatGPT registration”**, the current status is as follows:

- **Claude Connector:** The Claude integration is functioning properly – Claude can list the available tools and complete the OAuth round-trip successfully[\[1\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L3-L6). This indicates the Claude connector is using the correct OAuth endpoints and client parameters.
- **ChatGPT Connector:** The ChatGPT integration fails immediately when attempting to connect. The error observed is Failed to resolve OAuth client for MCP connector: <https://dexter.cash/mcp[\[2\>]](<https://github.com/BranchManager69/dexter-mcp/issues/1#L4-L7>). In practice, a network capture showed that ChatGPT is still using **legacy OAuth endpoint URLs** and missing the client identifier. Specifically, ChatGPT’s requests are pointing to:
- authorization_url: <https://dexter.cash/api/connector/oauth/authorize>
- token_url: <https://dexter.cash/api/connector/oauth/token>
- oauth_client_params: null (no client_id being sent)  
    These values reflect an **outdated registration**. Meanwhile, Dexter’s live metadata now advertises updated values:
- authorization_url: <https://dexter.cash/mcp/authorize>
- token_url: <https://dexter.cash/mcp/token>
- client_id: cid_a859560609a6448aa2f3a1c29f6ab496 (a specific client ID for the ChatGPT connector)[\[3\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L9-L17).  
    In summary, ChatGPT is using the old /api/connector/oauth/\* endpoints with no client_id, whereas the system now expects it to use the new /mcp/\* endpoints with the assigned client ID. Because of this mismatch, ChatGPT refuses to proceed with OAuth – it doesn’t even call our new /mcp/authorize URL, instead **failing instantly due to the stale info** cached on its side[\[4\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L16-L18).

This discrepancy explains why **ChatGPT’s connector cannot complete registration**: the OpenAI side is effectively out-of-sync with Dexter’s current OAuth configuration. Claude’s connector, on the other hand, likely fetched fresh metadata (or was set up after the change) and thus is using the correct new endpoints and client ID, allowing it to succeed.

## Root Cause: Stale Metadata & Endpoint Migration

The root cause is a **metadata mismatch and caching issue** resulting from recent changes in our OAuth endpoint configuration:

- **OAuth Endpoint Migration:** The OAuth authorization and token endpoints were moved from the dexter-api host (under /api/connector/oauth/...) to the dexter-mcp host (under /mcp/...) as part of tightening the scope and making the endpoints more MCP-focused[\[5\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L20-L23). In practice, this means that where previously ChatGPT/Claude were directed to <https://dexter.cash/api/connector/oauth/authorize> (and /token), they should now use <https://dexter.cash/mcp/authorize> (and /token). Along with this change, the OAuth **client ID** for the connector was introduced or changed. The new metadata served by Dexter includes a specific client_id (cid_a85956...) for the ChatGPT connector, as configured by the environment variable TOKEN_AI_OIDC_CLIENT_ID in our ops settings[\[6\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L13-L16). The .well-known metadata endpoints on the MCP server now return these new URLs and client ID values[\[7\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L23-L26).
- **ChatGPT’s Cached Registration:** The OpenAI ChatGPT side does not appear to have retrieved the updated metadata. The issue notes “no evidence that the ChatGPT connector has re-queried and stored those updated values”[\[7\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L23-L26). In other words, ChatGPT is working off the old registration info it obtained earlier (which had the legacy /api/connector/oauth URLs and likely no client ID, since previously we might not have advertised one if it was omitted). Because ChatGPT hasn’t refreshed this data, it doesn’t recognize the new /mcp endpoints or the required client ID. When ChatGPT attempts the OAuth, it uses the legacy endpoints; our server responds with a WWW-Authenticate header pointing to the new realm “MCP” and new endpoints/client (as part of the OAuth challenge), which ChatGPT doesn’t have a matching client record for – hence it immediately errors out with “Failed to resolve OAuth client for MCP connector”.
- **Claude’s Success:** By contrast, Claude’s connector flow “succeeds (tools list, OAuth round-trip)”[\[1\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L3-L6) because Claude either fetched the updated manifest or was configured with the correct endpoints from the start. This suggests the issue is not with our servers refusing to work – indeed, the **MCP server is correctly advertising and proxying the OAuth endpoints**. (In the MCP code, the well-known manifest includes the /mcp/authorize and /mcp/token URLs and the client ID when available[\[8\]](https://github.com/BranchManager69/dexter-mcp/blob/9cf6999e2a8c9d98ec7bee62f0aa30870c305d5a/http-server-oauth.mjs#L607-L615). The MCP server then forwards any incoming /mcp/authorize or /mcp/token requests to the underlying dexter-api OAuth handlers to maintain functionality[\[9\]](https://github.com/BranchManager69/dexter-mcp/blob/9cf6999e2a8c9d98ec7bee62f0aa30870c305d5a/http-server-oauth.mjs#L331-L339)[\[10\]](https://github.com/BranchManager69/dexter-mcp/blob/9cf6999e2a8c9d98ec7bee62f0aa30870c305d5a/http-server-oauth.mjs#L383-L391), effectively acting as a pass-through. Thus, the back-end logic for handling the OAuth grant hasn’t fundamentally changed – just the public endpoint locations have.) Claude’s integration presumably had no cached old data to conflict, so it used the new metadata as intended, whereas ChatGPT is stuck with an outdated view.

To put it plainly, **the ChatGPT connector is broken because OpenAI’s side has outdated OAuth metadata (pointing to now-moved endpoints and missing the required client_id), and it isn’t automatically refreshing that info**[\[4\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L16-L18)[\[7\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L23-L26). This mismatch causes ChatGPT to reject the connection attempt before even reaching our authorization logic.

## Solution Paths and Recommendations

To resolve the issue, we need to address the gap between what ChatGPT expects and what our system currently requires. The GitHub issue outlines a few proposed paths forward, which we can expand upon:

- **Short-Term Compatibility Fix:** Implement a backward-compatibility layer by **re-advertising or reinstating the legacy OAuth endpoints** (the /api/connector/oauth/authorize and /api/connector/oauth/token URLs) so that ChatGPT’s cached registration remains valid[\[11\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L28-L31). In practice, this could mean ensuring that requests to the old endpoints still succeed:
- We could deploy the MCP server to serve both sets of endpoints (or route the old URLs to the new handler). For example, the MCP service might listen on the old /api/connector/oauth/\* paths (in addition to the new ones) and forward them appropriately, similar to how it currently proxies the new ones to the API service.
- Alternatively, we ensure the dexter-api service continues to serve those endpoints (as it did before) in parallel with the new MCP endpoints. Since the MCP’s .well-known no longer points to /api/\*, new clients shouldn’t discover these old endpoints, but keeping them alive will allow ChatGPT’s existing integration to function.
- The goal is to **buy time and maintain functionality**: with the old endpoints operational, ChatGPT will proceed with its known flow (no client id, old URLs) and our backend can handle it as it did previously. This stops the bleeding in the short term, letting users connect via ChatGPT again without waiting for OpenAI to act. (The issue explicitly suggests serving both endpoint families temporarily for compatibility[\[11\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L28-L31).)
- **Long-Term Proper Fix:** Work with OpenAI (or use any available developer controls on the ChatGPT side) to **update or purge the cached connector metadata** so that ChatGPT learns about the new endpoints and client ID[\[12\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L32-L35). Since ChatGPT isn’t refreshing on its own, we likely need to trigger an update on their end:
- If there is a developer portal or registration interface for the ChatGPT connector (similar to how one might update a plugin’s manifest), use it to push the new OAuth metadata (perhaps updating the plugin/connector’s manifest URL or version, if applicable). This might force ChatGPT to fetch the latest .well-known info which includes the /mcp URLs and client_id.
- If no self-service method exists, **coordinate with OpenAI’s support** or partner engineers. They may need to manually clear the cached entry or update the configuration for our connector on their servers. The issue mentions possibly providing a “manual way to delete the connector’s record so it re-reads our metadata”[\[12\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L32-L35) – this likely implies an OpenAI-internal action.
- Once ChatGPT’s side recognizes the new authorization_url, token_url, and client_id, it will start sending the client_id and using the /mcp/authorize endpoint, which our system is now built to handle. At that point, we can retire the legacy endpoints. This is the ideal solution, but it may take time to execute, given it involves an external party (OpenAI).
- **Documentation and Tracking:** Document the origin and usage of the current ChatGPT OAuth **client_id** and any related credentials in our configuration[\[13\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L34-L37). For instance, note that TOKEN_AI_OIDC_CLIENT_ID in dexter-ops/.env is set to cid_a859560609a6448aa2f3a1c29f6ab496 (the client ID that OpenAI’s ChatGPT expects once updated)[\[14\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L14-L16). This is important because if we ever rotate or change this client ID (for security or other reasons), we will need to update the ChatGPT integration’s metadata accordingly. Keeping a clear record will help avoid repeating this kind of mismatch in the future. Essentially, **any change in OAuth config (client IDs, endpoint paths, scopes)** should be communicated and synchronized with third-party clients like ChatGPT or Claude ahead of time to prevent breakage.

By executing the short-term fix, we can restore functionality for users immediately: ChatGPT will be able to complete the OAuth flow using the endpoints it knows (which we will silently handle on our side). Meanwhile, pursuing the long-term fix with OpenAI ensures we’re not permanently stuck supporting two endpoint variants and prevents future users from unknowingly using deprecated paths.

## Open Questions and Considerations

The issue description also raises a few open questions that are worth addressing[\[15\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L40-L45):

- **Can we force ChatGPT to refresh its metadata?** In general, ChatGPT does not provide an obvious client-side mechanism for forcing a connector/plugin to update its OAuth configuration cache. From our side, there’s no API to invalidate what ChatGPT has stored. The likely ways to trigger a refresh are either **removing and re-adding the connector** (from the user’s perspective) or having OpenAI update it on their end. As noted above, the long-term solution is to coordinate with OpenAI to purge or update the cached registration[\[12\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L32-L35). Until that happens, ChatGPT will remain out-of-sync if we rely solely on it to pull new metadata. We should also monitor OpenAI’s developer documentation or contact them to see if they’ve provided any method to manually refresh a connector’s info (at the time of writing, it appears we must go through their support/development team).
- **If we expose both old and new endpoints, could Claude or future clients get “stuck” on the old ones?** In the current design, **new clients discover our OAuth endpoints via the metadata we serve**. Now that our .well-known manifests (both at the root and under /mcp) advertise only the /mcp/authorize and /mcp/token URLs and include the client_id[\[7\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L23-L26)[\[16\]](https://github.com/BranchManager69/dexter-mcp/blob/9cf6999e2a8c9d98ec7bee62f0aa30870c305d5a/http-server-oauth.mjs#L538-L547), any client that freshly integrates (or refreshes its data) will use the new endpoints. Claude is already using the new ones successfully. Serving the old /api/connector/oauth/\* endpoints in parallel _without advertising them_ should not cause a new client to prefer them – they won’t even know about those URLs unless they had been configured with them in the past. Therefore, the risk of **Claude or other future integrators “latching onto” the old endpoints is low** as long as we don’t publish those in our metadata going forward. The old endpoints would exist purely as a hidden compatibility layer for ChatGPT’s sake. We should, however, be cautious if we ever communicated those old URLs in any documentation or if some client coded them manually. Given the issue’s concern, we might double-check that **Claude’s integration is indeed using the new /mcp paths** (it is, as indicated by the success) and that nothing in Claude’s system cached the old ones. It’s also wise to plan to deprecate the legacy endpoints once we confirm ChatGPT has migrated, to avoid carrying them indefinitely.
- **Do we need to audit other places in our codebase for hardcoded /api/connector/oauth/\* references?** Yes, performing an audit is prudent. We should ensure no internal component is assuming the old URLs in a way that would break or conflict with whichever strategy we adopt. For example, **the Dexter front-end is still using the /api/connector/oauth endpoints** in its OAuth flow implementation. The connector auth page in dexter-fe calls the legacy endpoint to fetch the OAuth request info and later exchange tokens[\[17\]](https://github.com/BranchManager69/dexter-fe/blob/2ead379be03844d807a6bd40e00bf2ebe8d08181/app/connector/auth/page.tsx#L48-L56). This front-end code expects those routes to be valid. If we were to remove or change the /api/connector/oauth/\* endpoints without updating the front-end, the OAuth login UI would break for users. Thus, part of the audit is to update front-end references: either point them to the new MCP endpoints (if we intend to have the front-end use the MCP server directly for OAuth) or keep routing those calls through the API service (which now may delegate to MCP). Consistency is key. We should also search the dexter-api and dexter-mcp codebases for any lingering references to /api/connector/oauth outside of the primary handler. Given our approach, it might be fine to leave the front-end and dexter-api as-is for now (using the old paths) while MCP proxies or handles both. But long-term, if we fully migrate to MCP for OAuth, we will want to refactor the front-end to hit the new /mcp/authorize route (or a unified endpoint) so that the entire system is aligned. The audit will ensure we don’t overlook such changes.

In short, **exposing both old and new endpoint families is a safe interim solution** so long as we don’t advertise the deprecated ones to new clients and we plan their removal. And doing a thorough check of all code and config for assumptions about endpoint URLs will prevent surprises when we finalize the migration.

## Conclusion

The failure of the ChatGPT connector’s OAuth is ultimately due to **ChatGPT using outdated OAuth metadata (old endpoints and missing client ID) that no longer match our server’s configuration**. The Claude connector doesn’t face this issue, indicating our new OAuth setup is sound when the client has the right info. To solve the problem, we should immediately implement a **compatibility fix** by keeping the old /api/connector/oauth endpoints alive (so ChatGPT’s existing integration can function), and concurrently pursue a **proper fix** by working with OpenAI to update the ChatGPT connector’s registration to the new /mcp endpoints and client ID. During this period, it’s important to maintain consistency across our systems: ensure both front-end and back-end support the chosen approach, and document the OAuth client details for future reference. Once OpenAI updates the connector (or users refresh it), ChatGPT will align with our new OAuth scheme and we can phase out the legacy support. By taking these steps, we can restore the ChatGPT integration without losing momentum, and future-proof it to avoid similar issues going forward.

**Sources:**

- Dexter-MCP GitHub Issue “Connector OAuth metadata mismatch blocks ChatGPT registration”[\[3\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L9-L17)[\[4\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L16-L18)[\[18\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L20-L27)[\[19\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L28-L35)
- Dexter-MCP OAuth server code (showing new /mcp metadata and forwarding logic)[\[16\]](https://github.com/BranchManager69/dexter-mcp/blob/9cf6999e2a8c9d98ec7bee62f0aa30870c305d5a/http-server-oauth.mjs#L538-L547)[\[8\]](https://github.com/BranchManager69/dexter-mcp/blob/9cf6999e2a8c9d98ec7bee62f0aa30870c305d5a/http-server-oauth.mjs#L607-L615)[\[9\]](https://github.com/BranchManager69/dexter-mcp/blob/9cf6999e2a8c9d98ec7bee62f0aa30870c305d5a/http-server-oauth.mjs#L331-L339)[\[10\]](https://github.com/BranchManager69/dexter-mcp/blob/9cf6999e2a8c9d98ec7bee62f0aa30870c305d5a/http-server-oauth.mjs#L383-L391)
- Dexter-FE connector auth page (showing current use of legacy /api/connector/oauth endpoints)[\[17\]](https://github.com/BranchManager69/dexter-fe/blob/2ead379be03844d807a6bd40e00bf2ebe8d08181/app/connector/auth/page.tsx#L48-L56)

[\[1\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L3-L6) [\[2\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L4-L7) [\[3\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L9-L17) [\[4\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L16-L18) [\[5\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L20-L23) [\[6\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L13-L16) [\[7\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L23-L26) [\[11\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L28-L31) [\[12\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L32-L35) [\[13\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L34-L37) [\[14\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L14-L16) [\[15\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L40-L45) [\[18\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L20-L27) [\[19\]](https://github.com/BranchManager69/dexter-mcp/issues/1#L28-L35) Connector OAuth metadata mismatch blocks ChatGPT registration

<https://github.com/BranchManager69/dexter-mcp/issues/1>

[\[8\]](https://github.com/BranchManager69/dexter-mcp/blob/9cf6999e2a8c9d98ec7bee62f0aa30870c305d5a/http-server-oauth.mjs#L607-L615) [\[9\]](https://github.com/BranchManager69/dexter-mcp/blob/9cf6999e2a8c9d98ec7bee62f0aa30870c305d5a/http-server-oauth.mjs#L331-L339) [\[10\]](https://github.com/BranchManager69/dexter-mcp/blob/9cf6999e2a8c9d98ec7bee62f0aa30870c305d5a/http-server-oauth.mjs#L383-L391) [\[16\]](https://github.com/BranchManager69/dexter-mcp/blob/9cf6999e2a8c9d98ec7bee62f0aa30870c305d5a/http-server-oauth.mjs#L538-L547) http-server-oauth.mjs

<https://github.com/BranchManager69/dexter-mcp/blob/9cf6999e2a8c9d98ec7bee62f0aa30870c305d5a/http-server-oauth.mjs>

[\[17\]](https://github.com/BranchManager69/dexter-fe/blob/2ead379be03844d807a6bd40e00bf2ebe8d08181/app/connector/auth/page.tsx#L48-L56) page.tsx

<https://github.com/BranchManager69/dexter-fe/blob/2ead379be03844d807a6bd40e00bf2ebe8d08181/app/connector/auth/page.tsx>