import{c as k,j as t,u as S,r as w}from"./use-openai-global-BDHbj7zS.js";function x(e){return!e||!Number.isFinite(e)?"0":e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(1)}K`:String(e)}function T(e){if(!e)return"";try{const a=new Date(e),d=Date.now()-a.getTime(),i=Math.floor(d/6e4);if(i<60)return`${i}m`;const n=Math.floor(i/60);return n<24?`${n}h`:`${Math.floor(n/24)}d`}catch{return""}}function b(e){return e.url?e.url:e.author?.handle&&e.id?`https://x.com/${e.author.handle}/status/${e.id}`:null}function E(){const e=S("toolOutput"),[a,d]=w.useState(!1),[i,n]=w.useState(null);if(!e)return t.jsx("div",{className:"twitter-container",children:t.jsxs("div",{className:"twitter-loading",children:[t.jsx("div",{className:"twitter-loading__spinner"}),t.jsx("span",{children:"Loading tweets..."})]})});if(e.error)return t.jsx("div",{className:"twitter-container",children:t.jsx("div",{className:"twitter-error",children:e.error})});const r=e.tweets||[],u=e.ticker?`$${e.ticker}`:e.query||e.queries?.[0],f=a?r:r.slice(0,4);return r.length===0?t.jsx("div",{className:"twitter-container",children:t.jsx("div",{className:"twitter-empty",children:"No tweets found for this topic."})}):t.jsxs("div",{className:"twitter-container",children:[t.jsxs("div",{className:"twitter-header",children:[t.jsxs("div",{className:"twitter-header-left",children:[t.jsx("span",{className:"twitter-icon",children:"ð•"}),t.jsx("span",{className:"twitter-title",children:"Social Pulse"})]}),u&&t.jsx("span",{className:"twitter-query",children:u})]}),t.jsx("div",{className:"twitter-grid",children:f.map((s,v)=>{const o=s.author?.display_name||s.author?.handle||"Unknown",j=s.author?.handle?`@${s.author.handle}`:null,_=s.author?.avatar_url,g=s.author?.is_verified,p=b(s),$=T(s.timestamp),h=s.stats||{},c=s.media?.photos||[],m=s.id||`tweet-${v}`,l=i===m;return t.jsxs("div",{className:`twitter-card ${l?"twitter-card--expanded":""}`,onClick:()=>n(l?null:m),children:[t.jsxs("div",{className:"twitter-card__header",children:[t.jsx("div",{className:"twitter-card__avatar",children:_?t.jsx("img",{src:_,alt:o}):t.jsx("span",{children:o.slice(0,2)})}),t.jsxs("div",{className:"twitter-card__author",children:[t.jsxs("div",{className:"twitter-card__name",children:[t.jsx("span",{children:o}),g&&t.jsx("span",{className:"twitter-card__verified",children:"âœ“"})]}),t.jsxs("div",{className:"twitter-card__meta",children:[j&&t.jsx("span",{children:j}),t.jsx("span",{children:"Â·"}),t.jsx("span",{children:$})]})]})]}),t.jsx("p",{className:`twitter-card__text ${l?"":"twitter-card__text--clamped"}`,children:s.text}),c.length>0&&t.jsxs("div",{className:"twitter-card__media",children:[t.jsx("img",{src:c[0],alt:"Tweet media"}),c.length>1&&t.jsxs("span",{className:"twitter-card__media-count",children:["+",c.length-1]})]}),t.jsxs("div",{className:"twitter-card__stats",children:[t.jsxs("div",{className:"twitter-card__stat",children:[t.jsx("span",{className:"twitter-card__stat-icon",children:"â¤ï¸"}),t.jsx("span",{children:x(h.likes)})]}),t.jsxs("div",{className:"twitter-card__stat",children:[t.jsx("span",{className:"twitter-card__stat-icon",children:"ðŸ”"}),t.jsx("span",{children:x(h.retweets)})]}),t.jsxs("div",{className:"twitter-card__stat",children:[t.jsx("span",{className:"twitter-card__stat-icon",children:"ðŸ‘"}),t.jsx("span",{children:x(h.views)})]})]}),l&&p&&t.jsx("div",{className:"twitter-card__actions",children:t.jsx("a",{href:p,target:"_blank",rel:"noreferrer",className:"twitter-card__link",onClick:y=>y.stopPropagation(),children:"Open on X â†—"})})]},m)})}),r.length>4&&t.jsx("button",{className:"twitter-show-more",onClick:()=>d(!a),children:a?"Collapse":`Show ${r.length-4} more tweets`})]})}const N=document.getElementById("twitter-search-root");N&&k.createRoot(N).render(t.jsx(E,{}));
