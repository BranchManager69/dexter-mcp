import{j as e,u as v,r as _}from"./use-openai-global-C-kWgFLb.js";import{c as x}from"./client-rURR1_t4.js";import{g as u}from"./utils-B17YD0uM.js";function a(s){return!s||!Number.isFinite(s)?"â€”":s<1e-4?`$${s.toExponential(2)}`:s<1?`$${s.toFixed(6)}`:`$${s.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:4})}`}function j(s){return!s||!Number.isFinite(s)?"â€”":s>=1e9?`$${(s/1e9).toFixed(2)}B`:s>=1e6?`$${(s/1e6).toFixed(2)}M`:s>=1e3?`$${(s/1e3).toFixed(1)}K`:`$${s.toFixed(0)}`}function p(s){return s?s.length<=12?s:`${s.slice(0,6)}...${s.slice(-4)}`:"â€”"}function N({mint:s,size:c=32}){const[r,l]=_.useState(!1),i=s?u(s):void 0;return i&&!r?e.jsx("div",{className:"ohlcv-token-icon",style:{width:c,height:c},children:e.jsx("img",{src:i,alt:"Token",onError:()=>l(!0),referrerPolicy:"no-referrer"})}):null}function f({candles:s}){if(!s.length)return null;const c=s.map(n=>n.c).filter(n=>n!=null&&Number.isFinite(n));if(c.length<2)return null;const r=Math.min(...c),i=Math.max(...c)-r||1,t=s.slice(-30),h=(c[c.length-1]||0)>=(c[0]||0);return e.jsx("div",{className:"ohlcv-chart",children:e.jsx("div",{className:`ohlcv-chart__bars ${h?"ohlcv-chart__bars--up":"ohlcv-chart__bars--down"}`,children:t.map((n,m)=>{const d=((n.c??0)-r)/i*100;return e.jsx("div",{className:"ohlcv-chart__bar",style:{height:`${Math.max(d,5)}%`}},m)})})})}function g(){const s=v("toolOutput");if(!s)return e.jsx("div",{className:"ohlcv-container",children:e.jsxs("div",{className:"ohlcv-loading",children:[e.jsx("div",{className:"ohlcv-loading__spinner"}),e.jsx("span",{children:"Loading OHLCV data..."})]})});if(s.error)return e.jsx("div",{className:"ohlcv-container",children:e.jsx("div",{className:"ohlcv-error",children:s.error})});const c=s.summary,r=s.ohlcv||[];if(!c&&r.length===0)return e.jsx("div",{className:"ohlcv-container",children:e.jsx("div",{className:"ohlcv-empty",children:"No OHLCV data available."})});const l=c?.price_change_pct,i=l?!l.startsWith("-"):!0;return e.jsx("div",{className:"ohlcv-container",children:e.jsxs("div",{className:"ohlcv-card",children:[e.jsxs("div",{className:"ohlcv-header",children:[e.jsxs("div",{className:"ohlcv-header-left",children:[e.jsx("span",{className:"ohlcv-icon",children:"ðŸ“Š"}),e.jsx("span",{className:"ohlcv-title",children:"OHLCV Data"})]}),c?.interval&&e.jsx("span",{className:"ohlcv-badge",children:c.interval})]}),c?.mint_address&&e.jsxs("div",{className:"ohlcv-token",children:[e.jsx(N,{mint:c.mint_address,size:32}),e.jsxs("div",{className:"ohlcv-token__info",children:[e.jsx("span",{className:"ohlcv-token__label",children:"Token"}),e.jsx("a",{href:`https://solscan.io/token/${c.mint_address}`,target:"_blank",rel:"noreferrer",className:"ohlcv-token__address",children:p(c.mint_address)})]})]}),r.length>0&&e.jsx(f,{candles:r}),c&&e.jsx("div",{className:"ohlcv-summary",children:e.jsxs("div",{className:"ohlcv-summary__main",children:[e.jsx("span",{className:"ohlcv-summary__price",children:a(c.price_close)}),l&&e.jsx("span",{className:`ohlcv-summary__change ${i?"ohlcv-summary__change--positive":"ohlcv-summary__change--negative"}`,children:l})]})}),c&&e.jsxs("div",{className:"ohlcv-metrics",children:[e.jsxs("div",{className:"ohlcv-metric",children:[e.jsx("span",{className:"ohlcv-metric__label",children:"Open"}),e.jsx("span",{className:"ohlcv-metric__value",children:a(c.price_open)})]}),e.jsxs("div",{className:"ohlcv-metric",children:[e.jsx("span",{className:"ohlcv-metric__label",children:"High"}),e.jsx("span",{className:"ohlcv-metric__value ohlcv-metric__value--high",children:a(c.price_high)})]}),e.jsxs("div",{className:"ohlcv-metric",children:[e.jsx("span",{className:"ohlcv-metric__label",children:"Low"}),e.jsx("span",{className:"ohlcv-metric__value ohlcv-metric__value--low",children:a(c.price_low)})]}),e.jsxs("div",{className:"ohlcv-metric",children:[e.jsx("span",{className:"ohlcv-metric__label",children:"Volume"}),e.jsx("span",{className:"ohlcv-metric__value",children:j(c.total_volume)})]})]}),e.jsxs("div",{className:"ohlcv-footer",children:[c?.total_candles&&e.jsxs("span",{className:"ohlcv-footer__candles",children:[c.total_candles," candles"]}),c?.provider&&e.jsx("span",{className:"ohlcv-footer__provider",children:c.provider})]}),c?._truncated&&e.jsx("div",{className:"ohlcv-note",children:c._truncated})]})})}const o=document.getElementById("ohlcv-root");o&&x.createRoot(o).render(e.jsx(g,{}));
