import{c as v,j as e,u as _}from"./use-openai-global-q52TwAFT.js";function i(s){return!s||!Number.isFinite(s)?"â€”":s<1e-4?`$${s.toExponential(2)}`:s<1?`$${s.toFixed(6)}`:`$${s.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:4})}`}function x(s){return!s||!Number.isFinite(s)?"â€”":s>=1e9?`$${(s/1e9).toFixed(2)}B`:s>=1e6?`$${(s/1e6).toFixed(2)}M`:s>=1e3?`$${(s/1e3).toFixed(1)}K`:`$${s.toFixed(0)}`}function u(s){return s?s.length<=12?s:`${s.slice(0,6)}...${s.slice(-4)}`:"â€”"}function j({candles:s}){if(!s.length)return null;const c=s.map(r=>r.c).filter(r=>r!=null&&Number.isFinite(r));if(c.length<2)return null;const l=Math.min(...c),n=Math.max(...c)-l||1,o=s.slice(-30),h=(c[c.length-1]||0)>=(c[0]||0);return e.jsx("div",{className:"ohlcv-chart",children:e.jsx("div",{className:`ohlcv-chart__bars ${h?"ohlcv-chart__bars--up":"ohlcv-chart__bars--down"}`,children:o.map((r,m)=>{const d=((r.c??0)-l)/n*100;return e.jsx("div",{className:"ohlcv-chart__bar",style:{height:`${Math.max(d,5)}%`}},m)})})})}function p(){const s=_("toolOutput");if(!s)return e.jsx("div",{className:"ohlcv-container",children:e.jsxs("div",{className:"ohlcv-loading",children:[e.jsx("div",{className:"ohlcv-loading__spinner"}),e.jsx("span",{children:"Loading OHLCV data..."})]})});if(s.error)return e.jsx("div",{className:"ohlcv-container",children:e.jsx("div",{className:"ohlcv-error",children:s.error})});const c=s.summary,l=s.ohlcv||[];if(!c&&l.length===0)return e.jsx("div",{className:"ohlcv-container",children:e.jsx("div",{className:"ohlcv-empty",children:"No OHLCV data available."})});const a=c?.price_change_pct,n=a?!a.startsWith("-"):!0;return e.jsx("div",{className:"ohlcv-container",children:e.jsxs("div",{className:"ohlcv-card",children:[e.jsxs("div",{className:"ohlcv-header",children:[e.jsxs("div",{className:"ohlcv-header-left",children:[e.jsx("span",{className:"ohlcv-icon",children:"ðŸ“Š"}),e.jsx("span",{className:"ohlcv-title",children:"OHLCV Data"})]}),c?.interval&&e.jsx("span",{className:"ohlcv-badge",children:c.interval})]}),c?.mint_address&&e.jsxs("div",{className:"ohlcv-token",children:[e.jsx("span",{className:"ohlcv-token__label",children:"Token"}),e.jsx("a",{href:`https://solscan.io/token/${c.mint_address}`,target:"_blank",rel:"noreferrer",className:"ohlcv-token__address",children:u(c.mint_address)})]}),l.length>0&&e.jsx(j,{candles:l}),c&&e.jsx("div",{className:"ohlcv-summary",children:e.jsxs("div",{className:"ohlcv-summary__main",children:[e.jsx("span",{className:"ohlcv-summary__price",children:i(c.price_close)}),a&&e.jsx("span",{className:`ohlcv-summary__change ${n?"ohlcv-summary__change--positive":"ohlcv-summary__change--negative"}`,children:a})]})}),c&&e.jsxs("div",{className:"ohlcv-metrics",children:[e.jsxs("div",{className:"ohlcv-metric",children:[e.jsx("span",{className:"ohlcv-metric__label",children:"Open"}),e.jsx("span",{className:"ohlcv-metric__value",children:i(c.price_open)})]}),e.jsxs("div",{className:"ohlcv-metric",children:[e.jsx("span",{className:"ohlcv-metric__label",children:"High"}),e.jsx("span",{className:"ohlcv-metric__value ohlcv-metric__value--high",children:i(c.price_high)})]}),e.jsxs("div",{className:"ohlcv-metric",children:[e.jsx("span",{className:"ohlcv-metric__label",children:"Low"}),e.jsx("span",{className:"ohlcv-metric__value ohlcv-metric__value--low",children:i(c.price_low)})]}),e.jsxs("div",{className:"ohlcv-metric",children:[e.jsx("span",{className:"ohlcv-metric__label",children:"Volume"}),e.jsx("span",{className:"ohlcv-metric__value",children:x(c.total_volume)})]})]}),e.jsxs("div",{className:"ohlcv-footer",children:[c?.total_candles&&e.jsxs("span",{className:"ohlcv-footer__candles",children:[c.total_candles," candles"]}),c?.provider&&e.jsx("span",{className:"ohlcv-footer__provider",children:c.provider})]}),c?._truncated&&e.jsx("div",{className:"ohlcv-note",children:c._truncated})]})})}const t=document.getElementById("ohlcv-root");t&&v.createRoot(t).render(e.jsx(p,{}));
