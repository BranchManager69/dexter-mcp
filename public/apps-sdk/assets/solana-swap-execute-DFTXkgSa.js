import{c as F,j as s,u as E,r as I}from"./use-openai-global-BDHbj7zS.js";function t(...e){for(const a of e)if(typeof a=="string"&&a.trim())return a.trim()}function l(...e){for(const a of e){if(typeof a=="number"&&Number.isFinite(a))return a;if(typeof a=="string"){const n=Number(a);if(Number.isFinite(n))return n}}}const U={So11111111111111111111111111111111111111112:"SOL",EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v:"USDC",Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB:"USDT"};function x(e){return e?U[e]??e.slice(0,4).toUpperCase():"TOKEN"}function N(e){return e===void 0?"—":Math.abs(e)>=1?e.toLocaleString("en-US",{maximumFractionDigits:4}):e.toLocaleString("en-US",{maximumFractionDigits:6})}function L(e){return e===void 0?"—":`${e>=0?"+":""}${e.toFixed(2)}%`}function g(e,a=6,n=4){return e.length<=a+n+3?e:`${e.slice(0,a)}…${e.slice(-n)}`}function h({symbol:e,imageUrl:a,size:n=56}){const[r,c]=I.useState(!1),i=a&&!r;return s.jsx("div",{className:"swap-token-icon",style:{width:n,height:n},children:i?s.jsx("img",{src:a,alt:e,onError:()=>c(!0),referrerPolicy:"no-referrer"}):s.jsx("span",{className:"swap-token-icon__fallback",style:{fontSize:n*.3},children:e.slice(0,2)})})}function M({status:e}){const a={confirmed:{label:"Confirmed",className:"swap-status-badge--success"},pending:{label:"Pending",className:"swap-status-badge--pending"},failed:{label:"Failed",className:"swap-status-badge--error"}}[e];return s.jsxs("span",{className:`swap-status-badge ${a.className}`,children:[e==="confirmed"&&s.jsx("span",{className:"swap-status-badge__icon",children:"✓"}),e==="pending"&&s.jsx("span",{className:"swap-status-badge__icon swap-status-badge__icon--pulse",children:"●"}),e==="failed"&&s.jsx("span",{className:"swap-status-badge__icon",children:"✕"}),a.label]})}function C({fromSymbol:e,fromAmount:a,fromImage:n,toSymbol:r,toAmount:c,toImage:i}){return s.jsxs("div",{className:"swap-flow",children:[s.jsxs("div",{className:"swap-flow__side",children:[s.jsx(h,{symbol:e,imageUrl:n,size:56}),s.jsxs("div",{className:"swap-flow__info",children:[s.jsx("span",{className:"swap-flow__amount",children:a}),s.jsx("span",{className:"swap-flow__symbol",children:e})]})]}),s.jsx("div",{className:"swap-flow__arrow",children:s.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",children:s.jsx("path",{d:"M5 12h14M13 6l6 6-6 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),s.jsxs("div",{className:"swap-flow__side swap-flow__side--to",children:[s.jsx(h,{symbol:r,imageUrl:i,size:56}),s.jsxs("div",{className:"swap-flow__info",children:[s.jsx("span",{className:"swap-flow__amount swap-flow__amount--receive",children:c}),s.jsx("span",{className:"swap-flow__symbol",children:r})]})]})]})}function O(){const e=E("toolOutput"),a=e?e.result??e:null;if(!a)return s.jsx("div",{className:"swap-container",children:s.jsxs("div",{className:"swap-loading",children:[s.jsx("div",{className:"swap-loading__spinner"}),s.jsx("span",{children:"Executing swap..."})]})});const n=t(a.inputMint),r=t(a.outputMint),c=t(a.inputToken?.symbol)??x(n),i=t(a.outputToken?.symbol)??x(r),v=t(a.inputToken?.imageUrl,a.inputLogo),b=t(a.outputToken?.imageUrl,a.outputLogo),S=l(a.amountUi),k=l(a.outputAmountUi,a.expectedOutputUi),d=l(a.priceImpactPct),u=l(a.slippageBps),w=l(a.networkFeeSol),o=t(a.txSignature,a.transactionSignature,a.signature);t(a.swapId);const _=t(a.walletAddress),p=t(a.status)?.toLowerCase(),m=p==="confirmed"||p==="success"?"confirmed":p==="failed"||p==="error"?"failed":o?"confirmed":"pending",y=d!==void 0&&d<0,f=o?`https://solscan.io/tx/${o}`:null;return s.jsx("div",{className:"swap-container",children:s.jsxs("div",{className:`swap-card ${m==="confirmed"?"swap-card--success":""}`,children:[m==="confirmed"&&s.jsx("div",{className:"swap-card__glow swap-card__glow--success"}),s.jsxs("div",{className:"swap-card__header",children:[s.jsx("span",{className:"swap-card__title",children:"Swap Execution"}),s.jsx(M,{status:m})]}),s.jsx(C,{fromSymbol:c,fromAmount:N(S),fromImage:v,toSymbol:i,toAmount:N(k),toImage:b}),s.jsxs("div",{className:"swap-card__metrics",children:[d!==void 0&&s.jsxs("div",{className:"swap-card__metric",children:[s.jsx("span",{className:"swap-card__metric-label",children:"Price Impact"}),s.jsx("span",{className:`swap-card__metric-value ${y?"swap-card__metric-value--negative":"swap-card__metric-value--positive"}`,children:L(d)})]}),u!==void 0&&s.jsxs("div",{className:"swap-card__metric",children:[s.jsx("span",{className:"swap-card__metric-label",children:"Slippage"}),s.jsxs("span",{className:"swap-card__metric-value",children:[(u/100).toFixed(2),"%"]})]}),w!==void 0&&s.jsxs("div",{className:"swap-card__metric",children:[s.jsx("span",{className:"swap-card__metric-label",children:"Network Fee"}),s.jsxs("span",{className:"swap-card__metric-value",children:[w.toFixed(6)," SOL"]})]})]}),o&&s.jsxs("div",{className:"swap-card__signature",children:[s.jsx("span",{className:"swap-card__signature-label",children:"Transaction"}),s.jsx("span",{className:"swap-card__signature-value",children:g(o)})]}),s.jsxs("div",{className:"swap-card__footer",children:[_&&s.jsxs("span",{className:"swap-card__wallet",children:["Wallet: ",g(_)]}),s.jsx("div",{className:"swap-card__links",children:f&&s.jsx("a",{href:f,target:"_blank",rel:"noreferrer",className:"swap-card__link",children:"Solscan"})})]})]})})}const j=document.getElementById("solana-swap-execute-root");j&&F.createRoot(j).render(s.jsx(O,{}));
