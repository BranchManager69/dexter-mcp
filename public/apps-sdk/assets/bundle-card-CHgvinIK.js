import{c as B,j as e,u as T}from"./use-openai-global-BYgxb2IW.js";import{u as z,a as C,b as E,A as c,C as x,E as g,S as m,W as R,G as U,F as h}from"./AppShell-D5E2Sex6.js";function y(s){return s==null?"—":`$${s.toFixed(2)} USDC`}function j({bundle:s,showDetails:l=!1}){const o=s.tags??[];return e.jsxs("div",{style:{padding:"12px",background:"var(--dexter-bg-secondary, #f5f5f5)",borderRadius:"8px",marginBottom:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:[s.iconUrl&&e.jsx("img",{src:s.iconUrl,alt:s.name||"Bundle",style:{width:"48px",height:"48px",borderRadius:"8px",objectFit:"cover"}}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",margin:0,color:"var(--dexter-text-primary, #111)"},children:s.name||"Unnamed Bundle"}),s.isVerified&&e.jsx("span",{style:{fontSize:"12px",color:"#10b981"},children:"✓ Verified"}),s.isFeatured&&e.jsx("span",{style:{fontSize:"10px",background:"#8b5cf6",color:"white",padding:"2px 6px",borderRadius:"4px"},children:"Featured"})]}),e.jsx("p",{style:{fontSize:"13px",color:"var(--dexter-text-secondary, #666)",margin:"4px 0"},children:s.shortDescription||s.description||"No description"})]})]}),e.jsxs(U,{columns:3,children:[e.jsx(h,{label:"Price",value:y(s.priceUsdc)}),e.jsx(h,{label:"Tools",value:s.toolCount??s.tools?.length??"—"}),e.jsx(h,{label:"Uses",value:s.usesPerPurchase??"—"})]}),s.avgRating!=null&&e.jsxs("div",{style:{marginTop:"8px",fontSize:"13px",color:"var(--dexter-text-muted, #888)"},children:["★ ",s.avgRating.toFixed(1)," (",s.ratingCount??0," ratings) • ",s.totalPurchases??0," purchases"]}),o.length>0&&e.jsx("div",{style:{marginTop:"8px",display:"flex",flexWrap:"wrap",gap:"4px"},children:o.slice(0,5).map((t,r)=>e.jsx("span",{style:{fontSize:"11px",background:"var(--dexter-bg-tertiary, #e5e5e5)",padding:"2px 8px",borderRadius:"4px",color:"var(--dexter-text-muted, #666)"},children:t},r))}),l&&s.tools&&s.tools.length>0&&e.jsxs("div",{style:{marginTop:"12px",borderTop:"1px solid var(--dexter-border, #e5e5e5)",paddingTop:"12px"},children:[e.jsx("h4",{style:{fontSize:"13px",fontWeight:"600",marginBottom:"8px",color:"var(--dexter-text-secondary, #333)"},children:"Included Tools"}),s.tools.map((t,r)=>e.jsxs("div",{style:{fontSize:"12px",marginBottom:"4px"},children:[e.jsx("span",{style:{fontWeight:"500"},children:t.name}),t.description&&e.jsxs("span",{style:{color:"var(--dexter-text-muted, #888)"},children:[" — ",t.description]})]},r))]})]})}function k(){const s=T("toolOutput"),l=z()??null,o=C(),t=E(),r=l?{maxHeight:l,overflow:"auto"}:void 0,u=o!=="fullscreen"&&typeof t=="function";if(!s)return e.jsx(c,{style:r,children:e.jsx(x,{title:"Tool Bundle",badge:{label:"Loading"},children:e.jsx(g,{message:"Loading bundle..."})})});const{bundle:n,bundles:i,hasAccess:a,remainingUses:v,total:b,categories:p}=s;if(n){const d=a?`${v??"∞"} uses left`:"No Access";return e.jsx(c,{style:r,children:e.jsxs(x,{title:n.name||"Tool Bundle",badge:{label:a?"Owned":y(n.priceUsdc)},actions:u?e.jsx("button",{className:"dexter-link",onClick:()=>t?.({mode:"fullscreen"}),children:"Expand"}):null,children:[e.jsx(j,{bundle:n,showDetails:!0}),a&&e.jsx(m,{children:e.jsx("span",{children:d})}),!a&&n.priceUsdc!=null&&n.priceUsdc>0&&e.jsx(R,{children:"Purchase this bundle to access the tools."})]})})}return i&&i.length>0?e.jsx(c,{style:r,children:e.jsxs(x,{title:"Tool Bundles",badge:{label:`${b??i.length} found`},actions:u?e.jsx("button",{className:"dexter-link",onClick:()=>t?.({mode:"fullscreen"}),children:"Expand"}):null,children:[i.slice(0,10).map((d,S)=>e.jsx(j,{bundle:d},d.id||S)),i.length>10&&e.jsxs("div",{style:{textAlign:"center",fontSize:"13px",color:"var(--dexter-text-muted, #888)",padding:"8px"},children:["+",i.length-10," more bundles"]}),p&&p.length>0&&e.jsx(m,{children:e.jsxs("span",{children:["Categories: ",p.join(", ")]})})]})}):e.jsx(c,{style:r,children:e.jsx(x,{title:"Tool Bundles",badge:{label:"Empty"},children:e.jsx(g,{message:"No bundles found"})})})}const f=document.getElementById("bundle-card-root");f&&B.createRoot(f).render(e.jsx(k,{}));
