import{j as e,u as x,r as l}from"./use-openai-global-C-kWgFLb.js";import{c as _}from"./client-rURR1_t4.js";import{g as j}from"./utils-B17YD0uM.js";function o(...s){for(const r of s){if(typeof r=="number"&&Number.isFinite(r))return r;if(typeof r=="string"){const t=Number(r.replace(/%/g,""));if(Number.isFinite(t))return t}}}function v(s){return s===void 0?"—":s>=1e3?`${(s/1e3).toFixed(1)}K`:s.toString()}function f(s){return s===void 0?"—":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:0}).format(s)}function N(s){return s===void 0?"—":`${s>=0?"+":""}${s.toFixed(2)}%`}function g({symbol:s,mint:r,size:t=48}){const[a,i]=l.useState(!1),n=r?j(r):void 0,m=n&&!a;return e.jsx("div",{className:"pumpstream-token-icon",style:{width:t,height:t},children:m?e.jsx("img",{src:n,alt:s,onError:()=>i(!0),referrerPolicy:"no-referrer",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"4px"}}):e.jsx("span",{style:{fontSize:t*.35},children:s.slice(0,2).toUpperCase()})})}function b({stream:s,index:r}){const[t,a]=l.useState(!1),i=s.name||s.symbol||s.mintId||s.channel||`Stream ${r+1}`,n=o(s.currentViewers,s.viewer_count,s.viewers),m=o(s.marketCapUsd,s.market_cap_usd,s.marketCap),c=o(s.momentum,s.signal),d=c!==void 0&&c>=0,u=s.url||s.streamUrl||(s.mintId?`https://pump.fun/${s.mintId}`:void 0),h=s.thumbnail&&!t;return e.jsxs("a",{href:u,target:"_blank",rel:"noreferrer",className:"pumpstream-card",children:[e.jsxs("div",{className:"pumpstream-card__thumbnail",children:[h?e.jsx("img",{src:s.thumbnail,alt:i,onError:()=>a(!0),referrerPolicy:"no-referrer"}):e.jsx("div",{className:"pumpstream-card__thumbnail-fallback",children:e.jsx(g,{symbol:i,mint:s.mintId,size:48})}),e.jsxs("div",{className:"pumpstream-card__live-badge",children:[e.jsx("span",{className:"pumpstream-card__live-dot"}),e.jsx("span",{children:"LIVE"})]}),n!==void 0&&e.jsxs("div",{className:"pumpstream-card__viewers",children:[e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),e.jsx("span",{children:v(n)})]})]}),e.jsxs("div",{className:"pumpstream-card__content",children:[e.jsxs("div",{className:"pumpstream-card__header",children:[e.jsx("span",{className:"pumpstream-card__title",children:i}),s.symbol&&e.jsx("span",{className:"pumpstream-card__symbol",children:s.symbol})]}),e.jsxs("div",{className:"pumpstream-card__metrics",children:[e.jsxs("div",{className:"pumpstream-card__metric",children:[e.jsx("span",{className:"pumpstream-card__metric-label",children:"MCAP"}),e.jsx("span",{className:"pumpstream-card__metric-value",children:f(m)})]}),c!==void 0&&e.jsxs("div",{className:"pumpstream-card__metric pumpstream-card__metric--right",children:[e.jsx("span",{className:"pumpstream-card__metric-label",children:"MOMENTUM"}),e.jsx("span",{className:`pumpstream-card__metric-value ${d?"pumpstream-card__metric-value--positive":"pumpstream-card__metric-value--negative"}`,children:N(c)})]})]})]})]})}function y(){const s=x("toolOutput"),[r,t]=l.useState(!1);if(!s)return e.jsx("div",{className:"pumpstream-container",children:e.jsxs("div",{className:"pumpstream-loading",children:[e.jsx("div",{className:"pumpstream-loading__spinner"}),e.jsx("span",{children:"Loading live streams..."})]})});const a=Array.isArray(s.streams)?s.streams:[];if(a.length===0)return e.jsx("div",{className:"pumpstream-container",children:e.jsx("div",{className:"pumpstream-empty",children:"No active Pump.fun streams detected."})});const i=r?a:a.slice(0,6),n=a.length-i.length;return e.jsxs("div",{className:"pumpstream-container",children:[e.jsxs("div",{className:"pumpstream-header",children:[e.jsx("span",{className:"pumpstream-title",children:"Live Streams"}),e.jsxs("div",{className:"pumpstream-header__badges",children:[e.jsxs("span",{className:"pumpstream-live-indicator",children:[e.jsx("span",{className:"pumpstream-live-indicator__dot"}),e.jsx("span",{className:"pumpstream-live-indicator__ping"}),e.jsx("span",{children:"Live"})]}),e.jsxs("span",{className:"pumpstream-count",children:[a.length," streams"]})]})]}),e.jsx("div",{className:"pumpstream-grid",children:i.map((m,c)=>e.jsx(b,{stream:m,index:c},m.mintId||m.url||`${m.name}-${c}`))}),n>0&&e.jsx("button",{className:"pumpstream-show-more",onClick:()=>t(!r),children:r?"Collapse":`Show ${n} more streams`})]})}const p=document.getElementById("pumpstream-root");p&&_.createRoot(p).render(e.jsx(y,{}));
