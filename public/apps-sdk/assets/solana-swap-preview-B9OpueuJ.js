import{c as S,j as s,u as k,r as y}from"./use-openai-global-q52TwAFT.js";/* empty css                    */function n(...a){for(const e of a)if(typeof e=="string"&&e.trim())return e.trim()}function l(...a){for(const e of a){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const t=Number(e);if(Number.isFinite(t))return t}}}const I={So11111111111111111111111111111111111111112:"SOL",EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v:"USDC",Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB:"USDT"};function u(a){return a?I[a]??a.slice(0,4).toUpperCase():"TOKEN"}function w(a){return a===void 0?"—":Math.abs(a)>=1?a.toLocaleString("en-US",{maximumFractionDigits:4}):a.toLocaleString("en-US",{maximumFractionDigits:6})}function F(a){return a===void 0?"—":`${a>=0?"+":""}${a.toFixed(2)}%`}function E(a,e=4,t=4){return a.length<=e+t+3?a:`${a.slice(0,e)}…${a.slice(-t)}`}function _({symbol:a,imageUrl:e,size:t=56}){const[r,o]=y.useState(!1),c=e&&!r;return s.jsx("div",{className:"swap-token-icon",style:{width:t,height:t},children:c?s.jsx("img",{src:e,alt:a,onError:()=>o(!0),referrerPolicy:"no-referrer"}):s.jsx("span",{className:"swap-token-icon__fallback",style:{fontSize:t*.3},children:a.slice(0,2)})})}function L({fromSymbol:a,fromAmount:e,fromImage:t,toSymbol:r,toAmount:o,toImage:c}){return s.jsxs("div",{className:"swap-flow",children:[s.jsxs("div",{className:"swap-flow__side",children:[s.jsx(_,{symbol:a,imageUrl:t,size:56}),s.jsxs("div",{className:"swap-flow__info",children:[s.jsx("span",{className:"swap-flow__amount",children:e}),s.jsx("span",{className:"swap-flow__symbol",children:a})]})]}),s.jsx("div",{className:"swap-flow__arrow",children:s.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",children:s.jsx("path",{d:"M5 12h14M13 6l6 6-6 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),s.jsxs("div",{className:"swap-flow__side swap-flow__side--to",children:[s.jsx(_,{symbol:r,imageUrl:c,size:56}),s.jsxs("div",{className:"swap-flow__info",children:[s.jsx("span",{className:"swap-flow__amount swap-flow__amount--receive",children:o}),s.jsx("span",{className:"swap-flow__symbol",children:r})]})]})]})}function U(){const a=k("toolOutput"),e=a?a.result??a.quote??a:null;if(!e)return s.jsx("div",{className:"swap-container",children:s.jsxs("div",{className:"swap-loading",children:[s.jsx("div",{className:"swap-loading__spinner"}),s.jsx("span",{children:"Building swap quote..."})]})});const t=n(e.inputMint),r=n(e.outputMint),o=n(e.inputToken?.symbol)??u(t),c=n(e.outputToken?.symbol)??u(r),h=n(e.inputToken?.imageUrl,e.inputLogo),f=n(e.outputToken?.imageUrl,e.outputLogo),j=l(e.amountUi,e.inAmountUi),N=l(e.expectedOutputUi,e.outAmountUi),i=l(e.priceImpactPct),d=l(e.slippageBps),p=l(e.networkFeeSol),g=n(e.route,e.routeLabel)??"Jupiter",m=n(e.quoteId,e.swapId),v=i!==void 0&&i>1,b=i!==void 0&&i<0;return s.jsx("div",{className:"swap-container",children:s.jsxs("div",{className:"swap-card",children:[s.jsxs("div",{className:"swap-card__header",children:[s.jsx("span",{className:"swap-card__title",children:"Swap Preview"}),s.jsx("span",{className:"swap-card__badge",children:g})]}),s.jsx(L,{fromSymbol:o,fromAmount:w(j),fromImage:h,toSymbol:c,toAmount:w(N),toImage:f}),s.jsxs("div",{className:"swap-card__metrics",children:[i!==void 0&&s.jsxs("div",{className:"swap-card__metric",children:[s.jsx("span",{className:"swap-card__metric-label",children:"Price Impact"}),s.jsx("span",{className:`swap-card__metric-value ${b?"swap-card__metric-value--negative":"swap-card__metric-value--positive"}`,children:F(i)})]}),d!==void 0&&s.jsxs("div",{className:"swap-card__metric",children:[s.jsx("span",{className:"swap-card__metric-label",children:"Slippage"}),s.jsxs("span",{className:"swap-card__metric-value",children:[(d/100).toFixed(2),"%"]})]}),p!==void 0&&s.jsxs("div",{className:"swap-card__metric",children:[s.jsx("span",{className:"swap-card__metric-label",children:"Network Fee"}),s.jsxs("span",{className:"swap-card__metric-value",children:[p.toFixed(6)," SOL"]})]})]}),v&&s.jsxs("div",{className:"swap-card__warning",children:[s.jsx("div",{className:"swap-card__warning-icon",children:"⚠"}),s.jsxs("div",{className:"swap-card__warning-content",children:[s.jsx("span",{className:"swap-card__warning-title",children:"High Price Impact"}),s.jsx("span",{className:"swap-card__warning-text",children:"Consider using a smaller amount to reduce slippage."})]})]}),s.jsxs("div",{className:"swap-card__footer",children:[m&&s.jsxs("span",{className:"swap-card__quote-id",children:["Quote: ",E(m,6,4)]}),s.jsx("span",{className:"swap-card__status",children:"Ready to execute"})]})]})})}const x=document.getElementById("solana-swap-preview-root");x&&S.createRoot(x).render(s.jsx(U,{}));
