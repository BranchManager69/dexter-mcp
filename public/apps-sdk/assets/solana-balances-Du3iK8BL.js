import{c as D,j as a,u as A,r as C}from"./use-openai-global-BYgxb2IW.js";function v(...s){for(const e of s)if(typeof e=="string"&&e.trim())return e.trim()}function i(...s){for(const e of s){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const r=Number(e);if(Number.isFinite(r))return r}}}const P={So11111111111111111111111111111111111111112:"SOL",EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v:"USDC"};function M(s){if(s)return P[s]??s.slice(0,4).toUpperCase()}function S(s){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:2}).format(s)}function E(s){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:6}).format(s)}function L(s){return"$"+Math.round(s).toLocaleString("en-US")}function R(s){const e=s/100;return`${e>=0?"+":""}${e.toFixed(2)}%`}function O(s,e){if(s===void 0)return;const r=e&&e>4?4:e??6;return s.toLocaleString("en-US",{maximumFractionDigits:r})}function q(s,e=4,r=4){return s.length<=e+r+3?s:`${s.slice(0,e)}…${s.slice(-r)}`}function B({size:s=14}){return a.jsxs("svg",{width:s,height:s,viewBox:"0 0 128 128",fill:"none",children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"sol-grad",x1:"90%",y1:"0%",x2:"10%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#00FFA3"}),a.jsx("stop",{offset:"100%",stopColor:"#DC1FFF"})]})}),a.jsx("path",{d:"M25.3 93.5c0.9-0.9 2.2-1.5 3.5-1.5h97.1c2.2 0 3.4 2.7 1.8 4.3l-24.2 24.2c-0.9 0.9-2.2 1.5-3.5 1.5H2.9c-2.2 0-3.4-2.7-1.8-4.3L25.3 93.5z",fill:"url(#sol-grad)"}),a.jsx("path",{d:"M25.3 2.5c1-1 2.3-1.5 3.5-1.5h97.1c2.2 0 3.4 2.7 1.8 4.3L103.5 29.5c-0.9 0.9-2.2 1.5-3.5 1.5H2.9c-2.2 0-3.4-2.7-1.8-4.3L25.3 2.5z",fill:"url(#sol-grad)"}),a.jsx("path",{d:"M102.7 47.3c-0.9-0.9-2.2-1.5-3.5-1.5H2.1c-2.2 0-3.4 2.7-1.8 4.3l24.2 24.2c0.9 0.9 2.2 1.5 3.5 1.5h97.1c2.2 0 3.4-2.7 1.8-4.3L102.7 47.3z",fill:"url(#sol-grad)"})]})}function G({symbol:s,imageUrl:e,size:r=42}){const[d,c]=C.useState(!1),t=e&&!d;return a.jsx("div",{className:"balances-token-icon",style:{width:r,height:r},children:t?a.jsx("img",{src:e,alt:s,onError:()=>c(!0),referrerPolicy:"no-referrer"}):a.jsx("span",{className:"balances-token-icon__fallback",children:s.slice(0,2)})})}function T({entry:s,index:e,isExpanded:r,onToggle:d}){const c=s.token,t=v(s.mint),_=v(c?.symbol)??M(t)??`Token ${e+1}`,j=v(c?.name)??_,f=v(c?.imageUrl,s.icon,s.logo),h=v(c?.headerImageUrl,c?.openGraphImageUrl),b=i(s.amountUi,s.amount_ui),U=O(b,s.decimals),p=i(c?.priceUsd,c?.price_usd),g=p!==void 0?E(p):void 0,l=i(c?.priceChange24h,c?.price_change_24h),n=l!==void 0?R(l):void 0,m=l!==void 0&&l>=0,o=i(c?.holdingUsd,c?.balanceUsd,c?.balance_usd)??(p&&b?p*b:void 0),u=o!==void 0?L(o):void 0,y=i(c?.marketCap,c?.market_cap),x=y!==void 0?S(y):void 0,w=i(c?.volume24hUsd,c?.volume24h),k=w!==void 0?S(w):void 0,$=i(c?.liquidityUsd,c?.liquidity_usd),F=$!==void 0?S($):void 0;return a.jsxs("div",{className:`balances-card ${r?"balances-card--expanded":""} ${m?"balances-card--positive":"balances-card--negative"}`,onClick:d,children:[h&&a.jsx("div",{className:"balances-card__banner",style:{backgroundImage:`url(${h})`}}),a.jsx("div",{className:`balances-card__glow ${m?"balances-card__glow--positive":"balances-card__glow--negative"}`}),a.jsxs("div",{className:"balances-card__content",children:[a.jsxs("div",{className:"balances-card__header",children:[a.jsxs("div",{className:"balances-card__token",children:[a.jsx(G,{symbol:_,imageUrl:f,size:r?56:42}),a.jsxs("div",{className:"balances-card__token-info",children:[a.jsx("span",{className:`balances-card__symbol ${r?"balances-card__symbol--large":""}`,children:_}),a.jsx("span",{className:"balances-card__name",children:j})]})]}),a.jsxs("div",{className:"balances-card__value",children:[a.jsx("span",{className:`balances-card__holding ${r?"balances-card__holding--large":""}`,children:u??"—"}),a.jsx("span",{className:"balances-card__amount",children:U})]})]}),a.jsx("div",{className:"balances-card__divider"}),!r&&a.jsxs("div",{className:"balances-card__footer",children:[a.jsxs("div",{className:"balances-card__price-row",children:[a.jsx("span",{className:"balances-card__price",children:g??"—"}),a.jsx("span",{className:`balances-card__change ${m?"balances-card__change--positive":"balances-card__change--negative"}`,children:n??"—"})]}),k&&a.jsxs("span",{className:"balances-card__volume",children:["VOL ",k]})]}),r&&a.jsxs("div",{className:"balances-card__details",children:[a.jsxs("div",{className:"balances-card__metrics",children:[a.jsxs("div",{className:"balances-card__metric",children:[a.jsx("span",{className:"balances-card__metric-label",children:"PRICE"}),a.jsx("span",{className:"balances-card__metric-value",children:g??"—"})]}),a.jsxs("div",{className:"balances-card__metric",children:[a.jsx("span",{className:"balances-card__metric-label",children:"24H CHANGE"}),a.jsx("span",{className:`balances-card__metric-value ${m?"balances-card__change--positive":"balances-card__change--negative"}`,children:n??"—"})]}),x&&a.jsxs("div",{className:"balances-card__metric",children:[a.jsx("span",{className:"balances-card__metric-label",children:"MCAP"}),a.jsx("span",{className:"balances-card__metric-value",children:x})]}),k&&a.jsxs("div",{className:"balances-card__metric",children:[a.jsx("span",{className:"balances-card__metric-label",children:"VOL (24H)"}),a.jsx("span",{className:"balances-card__metric-value",children:k})]}),F&&a.jsxs("div",{className:"balances-card__metric",children:[a.jsx("span",{className:"balances-card__metric-label",children:"LIQUIDITY"}),a.jsx("span",{className:"balances-card__metric-value",children:F})]})]}),a.jsxs("div",{className:"balances-card__links",children:[t&&a.jsx("span",{className:"balances-card__mint",title:t,children:q(t)}),a.jsx("div",{className:"balances-card__external-links",children:t&&a.jsxs(a.Fragment,{children:[a.jsx("a",{href:`https://solscan.io/token/${t}`,target:"_blank",rel:"noreferrer",onClick:N=>N.stopPropagation(),children:"Solscan"}),a.jsx("a",{href:`https://birdeye.so/token/${t}`,target:"_blank",rel:"noreferrer",onClick:N=>N.stopPropagation(),children:"Birdeye"}),a.jsx("a",{href:`https://dexscreener.com/solana/${t}`,target:"_blank",rel:"noreferrer",onClick:N=>N.stopPropagation(),children:"Dexscreener"})]})})]})]})]})]})}function H(){const s=A("toolOutput"),[e,r]=C.useState(null),[d,c]=C.useState(!1),t=Array.isArray(s)?s:Array.isArray(s?.balances)?s.balances:[];if(!s)return a.jsx("div",{className:"balances-container",children:a.jsxs("div",{className:"balances-loading",children:[a.jsx("div",{className:"balances-loading__spinner"}),a.jsx("span",{children:"Loading balances..."})]})});if(t.length===0)return a.jsx("div",{className:"balances-container",children:a.jsx("div",{className:"balances-empty",children:"No balances detected for this wallet."})});let _=0,j=0;for(const l of t){const n=l.token,m=i(n?.holdingUsd,n?.balanceUsd,n?.balance_usd),o=i(n?.priceUsd,n?.price_usd),u=i(l.amountUi,l.amount_ui);v(n?.symbol)==="SOL"&&o&&(j=o);const x=m??(o&&u?o*u:0);x&&Number.isFinite(x)&&(_+=x)}const f=j>0?_/j:void 0,h=l=>{const n=l.token,m=i(n?.holdingUsd,n?.balanceUsd,n?.balance_usd),o=i(n?.priceUsd,n?.price_usd),u=i(l.amountUi,l.amount_ui);return m??(o&&u?o*u:0)??0},b=t.filter(l=>h(l)>0).sort((l,n)=>h(n)-h(l)),U=t.filter(l=>h(l)<=0),p=d?[...b,...U]:b.slice(0,6),g=d?0:Math.max(0,b.length-6)+U.length;return a.jsxs("div",{className:"balances-container",children:[a.jsxs("div",{className:"balances-total",children:[a.jsx("div",{className:"balances-total__gradient"}),a.jsxs("div",{className:"balances-total__content",children:[a.jsx("span",{className:"balances-total__label",children:"Total Portfolio"}),a.jsx("span",{className:"balances-total__value",children:L(_)}),f!==void 0&&a.jsxs("span",{className:"balances-total__sol",children:[a.jsx(B,{size:14}),a.jsx("span",{children:f.toLocaleString("en-US",{maximumFractionDigits:0})})]})]})]}),a.jsx("div",{className:"balances-grid",children:p.map((l,n)=>a.jsx(T,{entry:l,index:n,isExpanded:e===n,onToggle:()=>r(e===n?null:n)},`${n}-${l.mint||l.ata||"unknown"}`))}),g>0&&a.jsx("button",{className:"balances-show-more",onClick:()=>c(!d),children:d?"Collapse List":`Show ${g} more assets`})]})}const I=document.getElementById("solana-balances-root");I&&D.createRoot(I).render(a.jsx(H,{}));
