import{c as p,j as e,u as m,r as h}from"./use-openai-global-BDHbj7zS.js";function i(s,a=8){return s?s.length<=a*2+3?s:`${s.slice(0,a)}...${s.slice(-4)}`:"‚Äî"}function x(s){return s.challenges||s.data?"challenges":s.submitted!==void 0?"move":s.matched!==void 0||s.position!==void 0?"queue":s.deposits?"battle_state":s.winner||s.player1||s.player2?"wager_status":s.challengeId||s.wagerId||s.battleRoomId||s.roomId?"success":"unknown"}function r({size:s=20}){return e.jsxs("svg",{width:s,height:s,viewBox:"0 0 32 32",fill:"none",children:[e.jsx("circle",{cx:"16",cy:"16",r:"15",fill:"#fff",stroke:"#333",strokeWidth:"2"}),e.jsx("path",{d:"M1 16h30",stroke:"#333",strokeWidth:"2"}),e.jsx("path",{d:"M1 16a15 15 0 0 1 30 0",fill:"#ef4444"}),e.jsx("circle",{cx:"16",cy:"16",r:"5",fill:"#fff",stroke:"#333",strokeWidth:"2"}),e.jsx("circle",{cx:"16",cy:"16",r:"2.5",fill:"#333"})]})}function t({status:s}){const a={pending:{label:"Pending",className:"poke-badge--warning"},active:{label:"Active",className:"poke-badge--success"},matched:{label:"Matched!",className:"poke-badge--info"},completed:{label:"Completed",className:"poke-badge--primary"},cancelled:{label:"Cancelled",className:"poke-badge--neutral"},waiting:{label:"In Queue",className:"poke-badge--cyan"},confirmed:{label:"Confirmed",className:"poke-badge--success"}},c=a[s.toLowerCase()]||a.pending;return e.jsx("span",{className:`poke-badge ${c.className}`,children:c.label})}function o({amount:s,size:a="md"}){const c={sm:"poke-wager--sm",md:"poke-wager--md",lg:"poke-wager--lg"}[a];return e.jsxs("div",{className:`poke-wager ${c}`,children:[e.jsxs("span",{className:"poke-wager__value",children:["$",s]}),e.jsx("span",{className:"poke-wager__unit",children:"USDC"})]})}function k({challenges:s}){const[a,c]=h.useState(!1),l=a?s:s.slice(0,4);return e.jsx("div",{className:"poke-view",children:s.length===0?e.jsxs("div",{className:"poke-empty",children:[e.jsx(r,{size:48}),e.jsx("p",{children:"No open challenges right now"}),e.jsx("span",{children:"Create one with pokedexter_create_challenge!"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"poke-challenges-list",children:l.map((n,f)=>e.jsxs("div",{className:"poke-challenge-card",children:[e.jsxs("div",{className:"poke-challenge-header",children:[e.jsxs("div",{className:"poke-challenge-info",children:[e.jsx("span",{className:"poke-challenge-user",children:n.challengerId||i(n.challengerWallet)||"Anonymous"}),e.jsx("span",{className:"poke-challenge-format",children:n.format||"gen9randombattle"})]}),e.jsx(o,{amount:n.amount})]}),e.jsxs("div",{className:"poke-challenge-footer",children:[e.jsxs("span",{className:"poke-challenge-id",children:["ID: ",n.id]}),e.jsx("span",{className:"poke-challenge-cta",children:"ACCEPT TO BATTLE"})]})]},n.id))}),s.length>4&&e.jsx("button",{className:"poke-show-more",onClick:()=>c(!a),children:a?"Show Less":`Show ${s.length-4} more`})]})})}function j({payload:s}){const a=s.wagerId||s.id,c=s.battleRoomId||s.roomId,l=s.winner?"completed":s.status==="active"?"active":"pending";return e.jsxs("div",{className:"poke-view",children:[e.jsxs("div",{className:"poke-wager-header",children:[e.jsx("div",{className:"poke-wager-icon",children:"‚öîÔ∏è"}),e.jsxs("div",{className:"poke-wager-info",children:[e.jsx("span",{className:"poke-wager-title",children:"Wager Match"}),e.jsxs("span",{className:"poke-wager-id",children:["#",a]})]}),e.jsxs("div",{className:"poke-wager-meta",children:[e.jsx(o,{amount:s.amount||0}),e.jsx(t,{status:l})]})]}),e.jsxs("div",{className:"poke-players",children:[e.jsxs("div",{className:`poke-player ${s.player1?.deposited?"poke-player--ready":""}`,children:[e.jsx("span",{className:"poke-player-label",children:"Player 1"}),s.player1?.deposited&&e.jsx("span",{className:"poke-player-check",children:"‚úì"}),e.jsx("span",{className:"poke-player-wallet",children:i(s.player1?.wallet||s.player1?.userId)||"‚Äî"})]}),e.jsxs("div",{className:`poke-player ${s.player2?.deposited?"poke-player--ready":""}`,children:[e.jsx("span",{className:"poke-player-label",children:"Player 2"}),s.player2?.deposited&&e.jsx("span",{className:"poke-player-check",children:"‚úì"}),e.jsx("span",{className:"poke-player-wallet",children:i(s.player2?.wallet||s.player2?.userId)||"Waiting..."})]})]}),s.winner&&e.jsxs("div",{className:"poke-winner",children:[e.jsx("span",{className:"poke-winner-icon",children:"üèÜ"}),e.jsxs("div",{className:"poke-winner-info",children:[e.jsx("span",{className:"poke-winner-label",children:"Winner"}),e.jsx("span",{className:"poke-winner-name",children:s.winner})]})]}),c&&e.jsxs("a",{href:`https://poke.dexter.cash/battle/${c}`,target:"_blank",rel:"noreferrer",className:"poke-battle-link",children:["Watch Battle: ",c," ‚Üó"]})]})}function u({payload:s}){const a=s.battleRoomId||s.roomId;return e.jsx("div",{className:"poke-view",children:s.matched?e.jsxs("div",{className:"poke-matched",children:[e.jsx("span",{className:"poke-matched-icon",children:"‚öîÔ∏è"}),e.jsxs("div",{className:"poke-matched-info",children:[e.jsx("span",{className:"poke-matched-title",children:"Match Found!"}),a&&e.jsxs("a",{href:`https://poke.dexter.cash/battle/${a}`,target:"_blank",rel:"noreferrer",className:"poke-matched-link",children:["Join Battle: ",a]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"poke-queue-metrics",children:[e.jsxs("div",{className:"poke-queue-metric",children:[e.jsx("span",{className:"poke-queue-metric__label",children:"POSITION"}),e.jsxs("span",{className:"poke-queue-metric__value",children:["#",s.position||1]})]}),e.jsxs("div",{className:"poke-queue-metric",children:[e.jsx("span",{className:"poke-queue-metric__label",children:"IN QUEUE"}),e.jsxs("span",{className:"poke-queue-metric__value",children:[s.queueSize||1," players"]})]}),e.jsxs("div",{className:"poke-queue-metric",children:[e.jsx("span",{className:"poke-queue-metric__label",children:"WAGER"}),e.jsxs("span",{className:"poke-queue-metric__value",children:["$",s.amount||"‚Äî"]})]})]}),e.jsxs("div",{className:"poke-searching",children:[e.jsx("div",{className:"poke-searching-icon",children:e.jsx(r,{size:24})}),e.jsxs("div",{className:"poke-searching-info",children:[e.jsx("span",{className:"poke-searching-text",children:"Searching for opponent..."}),e.jsx("span",{className:"poke-searching-format",children:s.format||"gen9randombattle"})]})]})]})})}function N({payload:s}){const a=s.deposits?.player1?.deposited,c=s.deposits?.player2?.deposited,l=a&&c;return e.jsxs("div",{className:"poke-view",children:[e.jsxs("div",{className:"poke-deposit-status",children:[e.jsxs("div",{className:`poke-deposit-player ${a?"poke-deposit-player--ready":""}`,children:[e.jsx("span",{className:"poke-deposit-label",children:"Player 1"}),e.jsx("span",{className:"poke-deposit-icon",children:a?"‚úì":"‚ó∑"}),e.jsx("span",{className:"poke-deposit-state",children:a?"Deposited":"Pending"})]}),e.jsxs("div",{className:`poke-deposit-player ${c?"poke-deposit-player--ready":""}`,children:[e.jsx("span",{className:"poke-deposit-label",children:"Player 2"}),e.jsx("span",{className:"poke-deposit-icon",children:c?"‚úì":"‚ó∑"}),e.jsx("span",{className:"poke-deposit-state",children:c?"Deposited":"Pending"})]})]}),s.totalPot&&e.jsxs("div",{className:"poke-pot",children:[e.jsx("span",{className:"poke-pot-label",children:"Total Pot"}),e.jsx(o,{amount:s.totalPot,size:"lg"})]}),l&&e.jsxs("div",{className:"poke-ready",children:[e.jsx("span",{className:"poke-ready-icon",children:"‚ö°"}),e.jsx("span",{className:"poke-ready-text",children:"Battle Ready!"})]})]})}function v({payload:s}){return e.jsxs("div",{className:"poke-view",children:[e.jsx("div",{className:"poke-move-display",children:e.jsx("span",{className:"poke-move-submitted",children:s.submitted})}),e.jsxs("div",{className:"poke-move-metrics",children:[e.jsxs("div",{className:"poke-move-metric",children:[e.jsx("span",{className:"poke-move-metric__label",children:"BATTLE ID"}),e.jsx("span",{className:"poke-move-metric__value",children:s.battleId||"‚Äî"})]}),e.jsxs("div",{className:"poke-move-metric",children:[e.jsx("span",{className:"poke-move-metric__label",children:"STATUS"}),e.jsx("span",{className:"poke-move-metric__value",children:"Recorded"})]})]}),s.note&&e.jsx("p",{className:"poke-move-note",children:s.note})]})}function g({payload:s}){const a=s.battleRoomId||s.roomId;return e.jsxs("div",{className:"poke-view",children:[e.jsxs("div",{className:"poke-success-banner",children:[e.jsx("span",{className:"poke-success-icon",children:"‚úì"}),e.jsx("span",{className:"poke-success-text",children:"Success!"})]}),e.jsxs("div",{className:"poke-success-details",children:[s.amount&&e.jsxs("div",{className:"poke-success-detail",children:[e.jsx("span",{className:"poke-success-detail__label",children:"WAGER"}),e.jsxs("span",{className:"poke-success-detail__value",children:["$",s.amount]})]}),s.format&&e.jsxs("div",{className:"poke-success-detail",children:[e.jsx("span",{className:"poke-success-detail__label",children:"FORMAT"}),e.jsx("span",{className:"poke-success-detail__value",children:s.format})]}),s.challengeId&&e.jsxs("div",{className:"poke-success-detail",children:[e.jsx("span",{className:"poke-success-detail__label",children:"CHALLENGE ID"}),e.jsx("span",{className:"poke-success-detail__value",children:s.challengeId})]}),s.wagerId&&e.jsxs("div",{className:"poke-success-detail",children:[e.jsx("span",{className:"poke-success-detail__label",children:"WAGER ID"}),e.jsx("span",{className:"poke-success-detail__value",children:s.wagerId})]}),s.position&&e.jsxs("div",{className:"poke-success-detail",children:[e.jsx("span",{className:"poke-success-detail__label",children:"QUEUE POSITION"}),e.jsxs("span",{className:"poke-success-detail__value",children:["#",s.position]})]})]}),a&&e.jsx("a",{href:`https://poke.dexter.cash/battle/${a}`,target:"_blank",rel:"noreferrer",className:"poke-enter-battle",children:"‚ö° Enter Battle Room ‚Üó"}),s.escrowAddress&&e.jsxs("div",{className:"poke-escrow",children:[e.jsx("span",{className:"poke-escrow-label",children:"Deposit To"}),e.jsx("div",{className:"poke-escrow-address",children:e.jsx("code",{children:i(s.escrowAddress,16)})})]})]})}function w(){const s=m("toolOutput");if(!s)return e.jsx("div",{className:"poke-container",children:e.jsxs("div",{className:"poke-loading",children:[e.jsx(r,{size:24}),e.jsx("span",{children:"Loading..."})]})});if(s.error||s.ok===!1)return e.jsx("div",{className:"poke-container",children:e.jsx("div",{className:"poke-error",children:s.error||"Operation failed"})});const a=x(s),c=s.challenges||s.data||[],l={challenges:"Open Challenges",wager_status:"Wager Status",queue:"Queue Status",battle_state:"Battle State",move:"Move Submitted",success:"Success",unknown:"Pokedexter"};return e.jsx("div",{className:"poke-container",children:e.jsxs("div",{className:"poke-card",children:[e.jsxs("div",{className:"poke-header",children:[e.jsxs("div",{className:"poke-header-left",children:[e.jsx(r,{size:18}),e.jsx("span",{className:"poke-title",children:l[a]})]}),a==="challenges"&&e.jsxs("span",{className:"poke-challenges-count",children:[c.length," available"]}),a==="queue"&&e.jsx(t,{status:s.matched?"matched":"waiting"}),a==="move"&&e.jsx(t,{status:"confirmed"})]}),a==="challenges"&&e.jsx(k,{challenges:c}),a==="wager_status"&&e.jsx(j,{payload:s}),a==="queue"&&e.jsx(u,{payload:s}),a==="battle_state"&&e.jsx(N,{payload:s}),a==="move"&&e.jsx(v,{payload:s}),a==="success"&&e.jsx(g,{payload:s})]})})}const d=document.getElementById("pokedexter-root");d&&p.createRoot(d).render(e.jsx(w,{}));
