import{c as u,j as s,u as j}from"./use-openai-global-q52TwAFT.js";function b(e){return e.type?e.type:e.spaceId||e.space_id||e.spaceName?"spaces":e.code||e.language?"code-interpreter":e.query||e.sources?"deep-research":"async-job"}function m(e){switch(e){case"spaces":return"ğŸ™ï¸";case"code-interpreter":return"ğŸ’»";case"deep-research":return"ğŸ”¬";default:return"âš™ï¸"}}function p(e){switch(e){case"spaces":return"Twitter Spaces Job";case"code-interpreter":return"Code Execution";case"deep-research":return"Deep Research";default:return"Async Job"}}function h(e){switch(e){case"completed":return"job-status--completed";case"running":return"job-status--running";case"queued":return"job-status--queued";case"failed":return"job-status--failed";case"cancelled":return"job-status--cancelled";default:return""}}function _(e){if(!e)return"â€”";if(e<1e3)return`${e}ms`;const a=e/1e3;if(a<60)return`${a.toFixed(1)}s`;const r=Math.floor(a/60),t=Math.floor(a%60);return`${r}m ${t}s`}function x(e){if(!e)return"â€”";try{return new Date(e).toLocaleString()}catch{return e}}function N(){const e=j("toolOutput");if(!e)return s.jsx("div",{className:"job-container",children:s.jsxs("div",{className:"job-loading",children:[s.jsx("div",{className:"job-loading__spinner"}),s.jsx("span",{children:"Loading job..."})]})});if(e.error)return s.jsx("div",{className:"job-container",children:s.jsx("div",{className:"job-error",children:e.error})});const a=b(e),r=e.jobId||e.job_id||e.id,t=e.createdAt||e.created_at;e.completedAt||e.completed_at;const l=e.durationMs||e.duration_ms,o=e.spaceName||e.space_name,c=e.result||e.output;return s.jsx("div",{className:"job-container",children:s.jsxs("div",{className:"job-card",children:[s.jsxs("div",{className:"job-header",children:[s.jsxs("div",{className:"job-header-left",children:[s.jsx("span",{className:"job-icon",children:m(a)}),s.jsx("span",{className:"job-title",children:p(a)})]}),e.status&&s.jsx("span",{className:`job-badge ${h(e.status)}`,children:e.status.toUpperCase()})]}),e.status==="running"&&e.progress!=null&&s.jsxs("div",{className:"job-progress",children:[s.jsx("div",{className:"job-progress__bar",children:s.jsx("div",{className:"job-progress__fill",style:{width:`${Math.min(e.progress,100)}%`}})}),s.jsxs("span",{className:"job-progress__text",children:[e.progress,"%"]})]}),a==="spaces"&&o&&s.jsxs("div",{className:"job-detail-block",children:[s.jsx("span",{className:"job-detail-block__label",children:"Space"}),s.jsx("span",{className:"job-detail-block__value",children:o})]}),a==="code-interpreter"&&e.code&&s.jsxs("div",{className:"job-code",children:[s.jsx("span",{className:"job-code__label",children:e.language||"Code"}),s.jsx("pre",{className:"job-code__content",children:e.code})]}),a==="deep-research"&&e.query&&s.jsxs("div",{className:"job-detail-block",children:[s.jsx("span",{className:"job-detail-block__label",children:"Query"}),s.jsx("span",{className:"job-detail-block__value",children:e.query})]}),c&&e.status==="completed"&&s.jsxs("div",{className:"job-result",children:[s.jsx("span",{className:"job-result__label",children:"RESULT"}),s.jsx("div",{className:"job-result__content",children:typeof c=="string"?c:JSON.stringify(c,null,2).slice(0,500)})]}),e.sources&&e.sources.length>0&&s.jsxs("div",{className:"job-sources",children:[s.jsx("span",{className:"job-sources__label",children:"SOURCES"}),s.jsx("div",{className:"job-sources__list",children:e.sources.slice(0,5).map((n,d)=>s.jsx("a",{href:n.url,target:"_blank",rel:"noreferrer",className:"job-sources__item",children:n.title||n.url},d))})]}),s.jsxs("div",{className:"job-meta",children:[r&&s.jsxs("div",{className:"job-meta__item",children:[s.jsx("span",{className:"job-meta__label",children:"Job ID"}),s.jsx("span",{className:"job-meta__value",children:r.length>16?`${r.slice(0,8)}...`:r})]}),t&&s.jsxs("div",{className:"job-meta__item",children:[s.jsx("span",{className:"job-meta__label",children:"Started"}),s.jsx("span",{className:"job-meta__value",children:x(t)})]}),l&&s.jsxs("div",{className:"job-meta__item",children:[s.jsx("span",{className:"job-meta__label",children:"Duration"}),s.jsx("span",{className:"job-meta__value",children:_(l)})]})]})]})})}const i=document.getElementById("async-job-root");i&&u.createRoot(i).render(s.jsx(N,{}));
