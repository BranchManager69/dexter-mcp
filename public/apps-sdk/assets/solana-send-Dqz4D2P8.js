import{j as s,u as w,r as g}from"./use-openai-global-C-kWgFLb.js";import{c as v}from"./client-rURR1_t4.js";import{g as b}from"./utils-B17YD0uM.js";function d(...e){for(const n of e)if(typeof n=="string"&&n.trim())return n.trim()}function t(...e){for(const n of e){if(typeof n=="number"&&Number.isFinite(n))return n;if(typeof n=="string"){const a=Number(n);if(Number.isFinite(a))return a}}}function S(e){return e?e.toLowerCase().includes("sol")||e==="native:SOL"?"SOL":e.slice(0,4).toUpperCase():"TOKEN"}function F(e,n){if(e===void 0)return"—";const a=n&&n>4?4:n??6;return Math.abs(e)>=1?e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:a}):e.toLocaleString("en-US",{maximumSignificantDigits:6})}function u(e){return e===void 0||!Number.isFinite(e)?"—":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:2}).format(e)}function m(e,n=6,a=4){return e.length<=n+a+3?e:`${e.slice(0,n)}…${e.slice(-a)}`}function U({size:e=24}){return s.jsxs("svg",{width:e,height:e,viewBox:"0 0 128 128",fill:"none",children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"sol-send-grad",x1:"90%",y1:"0%",x2:"10%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:"#00FFA3"}),s.jsx("stop",{offset:"100%",stopColor:"#DC1FFF"})]})}),s.jsx("path",{d:"M25.3 93.5c0.9-0.9 2.2-1.5 3.5-1.5h97.1c2.2 0 3.4 2.7 1.8 4.3l-24.2 24.2c-0.9 0.9-2.2 1.5-3.5 1.5H2.9c-2.2 0-3.4-2.7-1.8-4.3L25.3 93.5z",fill:"url(#sol-send-grad)"}),s.jsx("path",{d:"M25.3 2.5c1-1 2.3-1.5 3.5-1.5h97.1c2.2 0 3.4 2.7 1.8 4.3L103.5 29.5c-0.9 0.9-2.2 1.5-3.5 1.5H2.9c-2.2 0-3.4-2.7-1.8-4.3L25.3 2.5z",fill:"url(#sol-send-grad)"}),s.jsx("path",{d:"M102.7 47.3c-0.9-0.9-2.2-1.5-3.5-1.5H2.1c-2.2 0-3.4 2.7-1.8 4.3l24.2 24.2c0.9 0.9 2.2 1.5 3.5 1.5h97.1c2.2 0 3.4-2.7 1.8-4.3L102.7 47.3z",fill:"url(#sol-send-grad)"})]})}function y({symbol:e,mint:n,size:a=24}){const[i,r]=g.useState(!1);if(e==="SOL")return s.jsx(U,{size:a});const c=n?b(n):void 0,l=c&&!i;return s.jsx("div",{className:"send-token-icon",style:{width:a,height:a},children:l?s.jsx("img",{src:c,alt:e,onError:()=>r(!0),referrerPolicy:"no-referrer",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"4px"}}):s.jsx("span",{style:{fontSize:a*.4},children:e.slice(0,2)})})}function k({status:e}){const n={sent:{label:"Confirmed",className:"send-status-badge--success",icon:"✓"},confirm:{label:"Needs Confirmation",className:"send-status-badge--warning",icon:"⚠"},failed:{label:"Failed",className:"send-status-badge--error",icon:"✕"}}[e];return s.jsxs("span",{className:`send-status-badge ${n.className}`,children:[s.jsx("span",{className:"send-status-badge__icon",children:n.icon}),n.label]})}function L({from:e,to:n,amount:a,symbol:i,mint:r,valueUsd:c,recipientHandle:l}){return s.jsxs("div",{className:"send-flow",children:[s.jsxs("div",{className:"send-flow__wallet",children:[s.jsx("div",{className:"send-flow__wallet-box",children:s.jsx("span",{className:"send-flow__wallet-label",children:"FROM"})}),s.jsx("span",{className:"send-flow__wallet-address",children:m(e)})]}),s.jsxs("div",{className:"send-flow__center",children:[s.jsxs("div",{className:"send-flow__amount-box",children:[s.jsx(y,{symbol:i,mint:r,size:28}),s.jsxs("div",{className:"send-flow__amount-info",children:[s.jsxs("span",{className:"send-flow__amount",children:[a," ",s.jsx("span",{className:"send-flow__symbol",children:i})]}),c&&s.jsx("span",{className:"send-flow__value-usd",children:c})]})]}),s.jsxs("div",{className:"send-flow__track",children:[s.jsx("div",{className:"send-flow__track-line"}),s.jsx("div",{className:"send-flow__plane",children:"✈"})]})]}),s.jsxs("div",{className:"send-flow__wallet send-flow__wallet--to",children:[s.jsx("div",{className:"send-flow__wallet-box send-flow__wallet-box--to",children:s.jsx("span",{className:"send-flow__wallet-label",children:"TO"})}),s.jsx("span",{className:"send-flow__wallet-address",children:m(n)}),l&&s.jsx("span",{className:"send-flow__handle",children:l})]})]})}function T(){const e=w("toolOutput");if(!e)return s.jsx("div",{className:"send-container",children:s.jsxs("div",{className:"send-loading",children:[s.jsx("div",{className:"send-loading__spinner"}),s.jsx("span",{children:"Processing transfer..."})]})});const n=e.result??e.transfer??null,a=e.ok?"sent":e.error==="confirmation_required"?"confirm":"failed",i=d(n?.destination,n?.recipient)??"",r=d(n?.signature),c=d(n?.solscanUrl)??(r?`https://solscan.io/tx/${r}`:null),l=S(n?.mint),_=F(t(n?.amountUi),n?.decimals),o=u(t(n?.valueUsd)),f=u(t(n?.priceUsd)),j=t(e.thresholdUsd),N=d(n?.walletAddress)??"",p=d(n?.recipientHandle),h=d(n?.memo);return s.jsx("div",{className:"send-container",children:s.jsxs("div",{className:`send-card ${a==="sent"?"send-card--success":a==="confirm"?"send-card--warning":"send-card--error"}`,children:[a==="sent"&&s.jsx("div",{className:"send-card__glow send-card__glow--success"}),s.jsxs("div",{className:"send-card__header",children:[s.jsxs("div",{className:"send-card__title-row",children:[s.jsx("span",{className:"send-card__icon",children:"✈"}),s.jsx("span",{className:"send-card__title",children:a==="confirm"?"Transfer Preview":"Token Transfer"})]}),s.jsx(k,{status:a})]}),a==="confirm"&&s.jsxs("div",{className:"send-card__warning",children:[s.jsx("div",{className:"send-card__warning-icon",children:"⚠"}),s.jsxs("div",{className:"send-card__warning-content",children:[s.jsx("span",{className:"send-card__warning-title",children:"Confirmation Required"}),s.jsxs("span",{className:"send-card__warning-text",children:["This transfer exceeds the $",j??50," threshold. Re-run with ",s.jsx("code",{children:"confirm=true"})," to proceed."]})]})]}),a==="failed"&&s.jsx("div",{className:"send-card__error",children:s.jsx("span",{children:e.message||e.error||"Transfer failed"})}),n&&s.jsx(L,{from:N,to:i,amount:_,symbol:l,mint:n.mint,valueUsd:o!=="—"?o:void 0,recipientHandle:p}),n&&s.jsxs("div",{className:"send-card__metrics",children:[s.jsxs("div",{className:"send-card__metric",children:[s.jsx("span",{className:"send-card__metric-label",children:"Amount"}),s.jsxs("span",{className:"send-card__metric-value",children:[_," ",l]})]}),s.jsxs("div",{className:"send-card__metric",children:[s.jsx("span",{className:"send-card__metric-label",children:"Value"}),s.jsx("span",{className:"send-card__metric-value",children:o})]}),f!=="—"&&s.jsxs("div",{className:"send-card__metric",children:[s.jsx("span",{className:"send-card__metric-label",children:"Price"}),s.jsx("span",{className:"send-card__metric-value",children:f})]})]}),h&&s.jsxs("div",{className:"send-card__memo",children:[s.jsx("span",{className:"send-card__memo-label",children:"Memo"}),s.jsx("span",{className:"send-card__memo-value",children:h})]}),r&&s.jsxs("div",{className:"send-card__signature",children:[s.jsx("span",{className:"send-card__signature-label",children:"Transaction"}),s.jsx("span",{className:"send-card__signature-value",children:m(r)})]}),c&&s.jsx("div",{className:"send-card__footer",children:s.jsx("a",{href:c,target:"_blank",rel:"noreferrer",className:"send-card__link",children:"View on Solscan ↗"})})]})})}const x=document.getElementById("solana-send-root");x&&v.createRoot(x).render(s.jsx(T,{}));
