import{j as e}from"./index-C03lspWc.js";import{c as o,u as d}from"./use-openai-global-DMsXV5Pq.js";function m(s){if(!s)return"";try{const a=new Date(s),t=Date.now()-a.getTime(),r=Math.floor(t/6e4);if(r<1)return"just now";if(r<60)return`${r}m ago`;const c=Math.floor(r/60);return c<24?`${c}h ago`:a.toLocaleDateString()}catch{return""}}function h(s){if(!s)return"";try{const a=new Date(s),n=Date.now(),t=a.getTime()-n;if(t<=0)return"expired";const r=Math.floor(t/6e4);return r<60?`${r}m left`:`${Math.floor(r/60)}h left`}catch{return""}}function i({shout:s,isNew:a=!1}){return e.jsxs("div",{className:`shout-card ${a?"shout-card--new":""}`,children:[e.jsxs("div",{className:"shout-card__header",children:[e.jsx("span",{className:"shout-card__alias",children:s.alias||"Anonymous"}),e.jsx("span",{className:"shout-card__time",children:m(s.created_at)})]}),e.jsx("p",{className:"shout-card__message",children:s.message}),s.expires_at&&e.jsx("span",{className:"shout-card__expiry",children:h(s.expires_at)})]})}function u(){const s=d("toolOutput");if(!s)return e.jsx("div",{className:"stream-container",children:e.jsxs("div",{className:"stream-loading",children:[e.jsx("div",{className:"stream-loading__spinner"}),e.jsx("span",{children:"Loading..."})]})});if(s.error)return e.jsx("div",{className:"stream-container",children:e.jsx("div",{className:"stream-error",children:s.error})});if(s.shout)return e.jsx("div",{className:"stream-container",children:e.jsxs("div",{className:"stream-card",children:[e.jsxs("div",{className:"stream-header",children:[e.jsxs("div",{className:"stream-header-left",children:[e.jsx("span",{className:"stream-icon",children:"ðŸ“£"}),e.jsx("span",{className:"stream-title",children:"Shout Submitted"})]}),e.jsx("span",{className:"stream-badge stream-badge--success",children:"âœ“ Queued"})]}),e.jsx(i,{shout:s.shout,isNew:!0}),e.jsx("div",{className:"stream-note",children:"Your shout will appear on the live stream overlay."})]})});const a=s.shouts||[];return a.length===0?e.jsx("div",{className:"stream-container",children:e.jsxs("div",{className:"stream-card",children:[e.jsx("div",{className:"stream-header",children:e.jsxs("div",{className:"stream-header-left",children:[e.jsx("span",{className:"stream-icon",children:"ðŸ“£"}),e.jsx("span",{className:"stream-title",children:"Stream Shouts"})]})}),e.jsx("div",{className:"stream-empty",children:"No shouts in queue right now."})]})}):e.jsx("div",{className:"stream-container",children:e.jsxs("div",{className:"stream-card",children:[e.jsxs("div",{className:"stream-header",children:[e.jsxs("div",{className:"stream-header-left",children:[e.jsx("span",{className:"stream-icon",children:"ðŸ“£"}),e.jsx("span",{className:"stream-title",children:"Stream Shouts"})]}),e.jsxs("span",{className:"stream-count",children:[a.length," in queue"]})]}),e.jsx("div",{className:"stream-feed",children:a.map((n,t)=>e.jsx(i,{shout:n},n.id||t))})]})})}const l=document.getElementById("stream-shout-root");l&&o.createRoot(l).render(e.jsx(u,{}));
