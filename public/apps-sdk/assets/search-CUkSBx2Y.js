import{c as o,j as e,u as d,r as m}from"./use-openai-global-BDHbj7zS.js";function u(a){if(!a)return null;try{const{hostname:s}=new URL(a);return s.replace(/^www\./i,"")}catch{return null}}function x(a,s){if(!a)return null;const r=a.trim();if(!r)return null;if(r.startsWith("data:")||/^https?:\/\//i.test(r))return r;if(r.startsWith("//"))return`https:${r}`;if(s)try{const c=new URL(s);return r.startsWith("/")?`${c.origin}${r}`:new URL(r,`${c.origin}/`).toString()}catch{}return r}function j({hostname:a,favicon:s,size:r=40}){const[c,n]=m.useState(!1),i=a?a.slice(0,2).toUpperCase():"WW",t=s&&!c;return e.jsx("div",{className:"search-site-icon",style:{width:r,height:r},children:t?e.jsx("img",{src:s,alt:"",onError:()=>n(!0),referrerPolicy:"no-referrer"}):e.jsx("span",{style:{fontSize:r*.35},children:i})})}function p({result:a,index:s}){const r=a.title?.trim()||`Result ${s+1}`,c=a.snippet?.trim(),n=a.url?.trim(),i=u(n),t=x(a.favicon,n);return e.jsxs("a",{href:n,target:"_blank",rel:"noreferrer",className:"search-result",children:[e.jsx("div",{className:"search-result__icon",children:e.jsx(j,{hostname:i,favicon:t,size:40})}),e.jsxs("div",{className:"search-result__content",children:[e.jsxs("div",{className:"search-result__header",children:[e.jsx("span",{className:"search-result__hostname",children:i}),e.jsxs("svg",{className:"search-result__external",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),e.jsx("polyline",{points:"15 3 21 3 21 9"}),e.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})]}),e.jsx("h3",{className:"search-result__title",children:r}),c&&e.jsx("p",{className:"search-result__snippet",children:c})]})]})}function f(){const a=d("toolOutput");if(!a)return e.jsx("div",{className:"search-container",children:e.jsxs("div",{className:"search-loading",children:[e.jsx("div",{className:"search-loading__spinner"}),e.jsx("span",{children:"Searching..."})]})});const s=a,r=Array.isArray(s.results)?s.results:Array.isArray(a)?a:[],c=typeof s.answer=="string"&&s.answer.trim().length?s.answer.trim():null,n=typeof s.query=="string"&&s.query.trim().length?s.query.trim():void 0,i=Array.isArray(s.images)?s.images.filter(t=>!!(t&&typeof t.url=="string"&&t.url.trim().length)):[];return r.length===0&&!c?e.jsx("div",{className:"search-container",children:e.jsx("div",{className:"search-empty",children:"No search results found."})}):e.jsx("div",{className:"search-container",children:e.jsxs("div",{className:"search-card",children:[e.jsx("div",{className:"search-card__header",children:e.jsxs("div",{className:"search-card__title-row",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"search-icon",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),e.jsx("span",{className:"search-card__title",children:"Search Results"})]})}),n&&e.jsxs("div",{className:"search-query",children:['"',n,'"']}),c&&e.jsxs("div",{className:"search-summary",children:[e.jsx("span",{className:"search-summary__label",children:"AI Summary"}),e.jsx("p",{className:"search-summary__text",children:c})]}),i.length>0&&e.jsxs("div",{className:"search-images",children:[e.jsx("span",{className:"search-images__label",children:"Visuals"}),e.jsx("div",{className:"search-images__grid",children:i.slice(0,4).map((t,l)=>e.jsx("a",{href:t.url,target:"_blank",rel:"noreferrer",className:"search-images__item",children:e.jsx("img",{src:t.url,alt:t.description||"Search result",referrerPolicy:"no-referrer"})},l))})]}),e.jsx("div",{className:"search-results",children:r.map((t,l)=>e.jsx(p,{result:t,index:l},t.id||l))})]})})}const h=document.getElementById("search-root");h&&o.createRoot(h).render(e.jsx(f,{}));
