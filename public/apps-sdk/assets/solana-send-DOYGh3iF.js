import{c as w,j as s,u as v}from"./use-openai-global-Dfh2Qj7q.js";function c(...e){for(const n of e)if(typeof n=="string"&&n.trim())return n.trim()}function i(...e){for(const n of e){if(typeof n=="number"&&Number.isFinite(n))return n;if(typeof n=="string"){const a=Number(n);if(Number.isFinite(a))return a}}}const g={"native:SOL":"SOL",So11111111111111111111111111111111111111112:"SOL",EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v:"USDC",Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB:"USDT"};function b(e){return e?e.toLowerCase().includes("sol")||e==="native:SOL"?"SOL":g[e]??e.slice(0,4).toUpperCase():"TOKEN"}function S(e,n){if(e===void 0)return"—";const a=n&&n>4?4:n??6;return Math.abs(e)>=1?e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:a}):e.toLocaleString("en-US",{maximumSignificantDigits:6})}function x(e){return e===void 0||!Number.isFinite(e)?"—":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:2}).format(e)}function o(e,n=6,a=4){return e.length<=n+a+3?e:`${e.slice(0,n)}…${e.slice(-a)}`}function F({size:e=24}){return s.jsxs("svg",{width:e,height:e,viewBox:"0 0 128 128",fill:"none",children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"sol-send-grad",x1:"90%",y1:"0%",x2:"10%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:"#00FFA3"}),s.jsx("stop",{offset:"100%",stopColor:"#DC1FFF"})]})}),s.jsx("path",{d:"M25.3 93.5c0.9-0.9 2.2-1.5 3.5-1.5h97.1c2.2 0 3.4 2.7 1.8 4.3l-24.2 24.2c-0.9 0.9-2.2 1.5-3.5 1.5H2.9c-2.2 0-3.4-2.7-1.8-4.3L25.3 93.5z",fill:"url(#sol-send-grad)"}),s.jsx("path",{d:"M25.3 2.5c1-1 2.3-1.5 3.5-1.5h97.1c2.2 0 3.4 2.7 1.8 4.3L103.5 29.5c-0.9 0.9-2.2 1.5-3.5 1.5H2.9c-2.2 0-3.4-2.7-1.8-4.3L25.3 2.5z",fill:"url(#sol-send-grad)"}),s.jsx("path",{d:"M102.7 47.3c-0.9-0.9-2.2-1.5-3.5-1.5H2.1c-2.2 0-3.4 2.7-1.8 4.3l24.2 24.2c0.9 0.9 2.2 1.5 3.5 1.5h97.1c2.2 0 3.4-2.7 1.8-4.3L102.7 47.3z",fill:"url(#sol-send-grad)"})]})}function U({symbol:e,size:n=24}){return e==="SOL"?s.jsx(F,{size:n}):s.jsx("div",{className:"send-token-icon",style:{width:n,height:n},children:s.jsx("span",{style:{fontSize:n*.4},children:e.slice(0,2)})})}function L({status:e}){const n={sent:{label:"Confirmed",className:"send-status-badge--success",icon:"✓"},confirm:{label:"Needs Confirmation",className:"send-status-badge--warning",icon:"⚠"},failed:{label:"Failed",className:"send-status-badge--error",icon:"✕"}}[e];return s.jsxs("span",{className:`send-status-badge ${n.className}`,children:[s.jsx("span",{className:"send-status-badge__icon",children:n.icon}),n.label]})}function y({from:e,to:n,amount:a,symbol:d,valueUsd:r,recipientHandle:l}){return s.jsxs("div",{className:"send-flow",children:[s.jsxs("div",{className:"send-flow__wallet",children:[s.jsx("div",{className:"send-flow__wallet-box",children:s.jsx("span",{className:"send-flow__wallet-label",children:"FROM"})}),s.jsx("span",{className:"send-flow__wallet-address",children:o(e)})]}),s.jsxs("div",{className:"send-flow__center",children:[s.jsxs("div",{className:"send-flow__amount-box",children:[s.jsx(U,{symbol:d,size:28}),s.jsxs("div",{className:"send-flow__amount-info",children:[s.jsxs("span",{className:"send-flow__amount",children:[a," ",s.jsx("span",{className:"send-flow__symbol",children:d})]}),r&&s.jsx("span",{className:"send-flow__value-usd",children:r})]})]}),s.jsxs("div",{className:"send-flow__track",children:[s.jsx("div",{className:"send-flow__track-line"}),s.jsx("div",{className:"send-flow__plane",children:"✈"})]})]}),s.jsxs("div",{className:"send-flow__wallet send-flow__wallet--to",children:[s.jsx("div",{className:"send-flow__wallet-box send-flow__wallet-box--to",children:s.jsx("span",{className:"send-flow__wallet-label",children:"TO"})}),s.jsx("span",{className:"send-flow__wallet-address",children:o(n)}),l&&s.jsx("span",{className:"send-flow__handle",children:l})]})]})}function C(){const e=v("toolOutput");if(!e)return s.jsx("div",{className:"send-container",children:s.jsxs("div",{className:"send-loading",children:[s.jsx("div",{className:"send-loading__spinner"}),s.jsx("span",{children:"Processing transfer..."})]})});const n=e.result??e.transfer??null,a=e.ok?"sent":e.error==="confirmation_required"?"confirm":"failed",d=c(n?.destination,n?.recipient)??"",r=c(n?.signature),l=c(n?.solscanUrl)??(r?`https://solscan.io/tx/${r}`:null),m=b(n?.mint),_=S(i(n?.amountUi),n?.decimals),t=x(i(n?.valueUsd)),f=x(i(n?.priceUsd)),j=i(e.thresholdUsd),N=c(n?.walletAddress)??"",p=c(n?.recipientHandle),u=c(n?.memo);return s.jsx("div",{className:"send-container",children:s.jsxs("div",{className:`send-card ${a==="sent"?"send-card--success":a==="confirm"?"send-card--warning":"send-card--error"}`,children:[a==="sent"&&s.jsx("div",{className:"send-card__glow send-card__glow--success"}),s.jsxs("div",{className:"send-card__header",children:[s.jsxs("div",{className:"send-card__title-row",children:[s.jsx("span",{className:"send-card__icon",children:"✈"}),s.jsx("span",{className:"send-card__title",children:a==="confirm"?"Transfer Preview":"Token Transfer"})]}),s.jsx(L,{status:a})]}),a==="confirm"&&s.jsxs("div",{className:"send-card__warning",children:[s.jsx("div",{className:"send-card__warning-icon",children:"⚠"}),s.jsxs("div",{className:"send-card__warning-content",children:[s.jsx("span",{className:"send-card__warning-title",children:"Confirmation Required"}),s.jsxs("span",{className:"send-card__warning-text",children:["This transfer exceeds the $",j??50," threshold. Re-run with ",s.jsx("code",{children:"confirm=true"})," to proceed."]})]})]}),a==="failed"&&s.jsx("div",{className:"send-card__error",children:s.jsx("span",{children:e.message||e.error||"Transfer failed"})}),n&&s.jsx(y,{from:N,to:d,amount:_,symbol:m,valueUsd:t!=="—"?t:void 0,recipientHandle:p}),n&&s.jsxs("div",{className:"send-card__metrics",children:[s.jsxs("div",{className:"send-card__metric",children:[s.jsx("span",{className:"send-card__metric-label",children:"Amount"}),s.jsxs("span",{className:"send-card__metric-value",children:[_," ",m]})]}),s.jsxs("div",{className:"send-card__metric",children:[s.jsx("span",{className:"send-card__metric-label",children:"Value"}),s.jsx("span",{className:"send-card__metric-value",children:t})]}),f!=="—"&&s.jsxs("div",{className:"send-card__metric",children:[s.jsx("span",{className:"send-card__metric-label",children:"Price"}),s.jsx("span",{className:"send-card__metric-value",children:f})]})]}),u&&s.jsxs("div",{className:"send-card__memo",children:[s.jsx("span",{className:"send-card__memo-label",children:"Memo"}),s.jsx("span",{className:"send-card__memo-value",children:u})]}),r&&s.jsxs("div",{className:"send-card__signature",children:[s.jsx("span",{className:"send-card__signature-label",children:"Transaction"}),s.jsx("span",{className:"send-card__signature-value",children:o(r)})]}),l&&s.jsx("div",{className:"send-card__footer",children:s.jsx("a",{href:l,target:"_blank",rel:"noreferrer",className:"send-card__link",children:"View on Solscan ↗"})})]})})}const h=document.getElementById("solana-send-root");h&&w.createRoot(h).render(s.jsx(C,{}));
