import{c as u,j as e,u as N,r as m}from"./use-openai-global-Dfh2Qj7q.js";function _(n){return n<60?`${n}s`:n<3600?`${Math.round(n/60)}m`:n<86400?`${Math.round(n/3600)}h`:`${Math.round(n/86400)}d`}function t(n,s=4){return Number.isFinite(n)?Math.abs(n)>=1e9?`${(n/1e9).toFixed(2)}B`:Math.abs(n)>=1e6?`${(n/1e6).toFixed(2)}M`:Math.abs(n)>=1e3?`${(n/1e3).toFixed(2)}K`:n.toFixed(s):"â€”"}function v(n){return n===void 0||!Number.isFinite(n)?"â€”":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:2}).format(n)}function h(n,s=6){return n.length<=s*2+3?n:`${n.slice(0,s)}â€¦${n.slice(-4)}`}function p(n){if(!n)return"â€”";const a=Math.floor(Date.now()/1e3)-n;return a<60?`${a}s ago`:a<3600?`${Math.floor(a/60)}m ago`:a<86400?`${Math.floor(a/3600)}h ago`:`${Math.floor(a/86400)}d ago`}function f({buy:n,sell:s,label:a}){const i=n+s,r=i>0?n/i*100:50,o=i>0?s/i*100:50;return e.jsxs("div",{className:"onchain-volume-bar",children:[a&&e.jsx("span",{className:"onchain-volume-bar__label",children:a}),e.jsxs("div",{className:"onchain-volume-bar__track",children:[e.jsx("div",{className:"onchain-volume-bar__buy",style:{width:`${r}%`}}),e.jsx("div",{className:"onchain-volume-bar__sell",style:{width:`${o}%`}}),e.jsxs("div",{className:"onchain-volume-bar__values",children:[e.jsx("span",{className:"onchain-volume-bar__value onchain-volume-bar__value--buy",children:t(n)}),e.jsx("span",{className:"onchain-volume-bar__value onchain-volume-bar__value--sell",children:t(s)})]})]}),e.jsxs("div",{className:"onchain-volume-bar__legend",children:[e.jsxs("span",{children:["BUY ",r.toFixed(0),"%"]}),e.jsxs("span",{children:["SELL ",o.toFixed(0),"%"]})]})]})}function b({value:n,symbol:s="SOL"}){const a=n>0,i=Math.abs(n)<1e-4;return e.jsxs("div",{className:`onchain-net-flow ${i?"":a?"onchain-net-flow--positive":"onchain-net-flow--negative"}`,children:[!i&&e.jsx("span",{className:"onchain-net-flow__arrow",children:a?"â†‘":"â†“"}),e.jsxs("div",{className:"onchain-net-flow__info",children:[e.jsx("span",{className:"onchain-net-flow__label",children:"Net Flow"}),e.jsxs("span",{className:"onchain-net-flow__value",children:[a?"+":"",t(n)," ",s]})]})]})}function g({buyers:n,sellers:s}){const[a,i]=m.useState(!1),r=a?10:3,o=(n||[]).slice(0,r),c=(s||[]).slice(0,r);if(o.length===0&&c.length===0)return null;const j=(n?.length||0)>3||(s?.length||0)>3;return e.jsxs("div",{className:"onchain-traders",children:[e.jsxs("div",{className:"onchain-traders__header",children:[e.jsx("span",{className:"onchain-traders__title",children:"Top Traders"}),j&&e.jsx("button",{className:"onchain-traders__toggle",onClick:()=>i(!a),children:a?"Show Less":"Show All"})]}),e.jsxs("div",{className:"onchain-traders__grid",children:[e.jsxs("div",{className:"onchain-traders__column",children:[e.jsx("span",{className:"onchain-traders__column-title onchain-traders__column-title--buy",children:"â†‘ Buyers"}),o.map(l=>e.jsxs("a",{href:`https://solscan.io/account/${l.wallet}`,target:"_blank",rel:"noreferrer",className:"onchain-traders__item onchain-traders__item--buy",children:[e.jsx("span",{className:"onchain-traders__wallet",children:h(l.wallet)}),e.jsxs("span",{className:"onchain-traders__amount",children:["+",t(l.netBaseVolume,2)]})]},l.wallet))]}),e.jsxs("div",{className:"onchain-traders__column",children:[e.jsx("span",{className:"onchain-traders__column-title onchain-traders__column-title--sell",children:"â†“ Sellers"}),c.map(l=>e.jsxs("a",{href:`https://solscan.io/account/${l.wallet}`,target:"_blank",rel:"noreferrer",className:"onchain-traders__item onchain-traders__item--sell",children:[e.jsx("span",{className:"onchain-traders__wallet",children:h(l.wallet)}),e.jsx("span",{className:"onchain-traders__amount",children:t(l.netBaseVolume,2)})]},l.wallet))]})]})]})}function x({trades:n}){const[s,a]=m.useState(!1),i=s?20:5,r=(n||[]).slice(0,i);if(r.length===0)return null;const o=(n?.length||0)>5;return e.jsxs("div",{className:"onchain-trades",children:[e.jsxs("div",{className:"onchain-trades__header",children:[e.jsx("span",{className:"onchain-trades__title",children:"Recent Trades"}),o&&e.jsx("button",{className:"onchain-trades__toggle",onClick:()=>a(!s),children:s?"Collapse":`Show ${Math.min(20,n.length)} trades`})]}),e.jsx("div",{className:"onchain-trades__list",children:r.map(c=>e.jsxs("a",{href:`https://solscan.io/tx/${c.signature}`,target:"_blank",rel:"noreferrer",className:`onchain-trades__item ${c.side==="buy"?"onchain-trades__item--buy":"onchain-trades__item--sell"}`,children:[e.jsxs("div",{className:"onchain-trades__item-left",children:[e.jsx("span",{className:"onchain-trades__arrow",children:c.side==="buy"?"â†‘":"â†“"}),e.jsx("span",{className:"onchain-trades__sig",children:h(c.signature,8)})]}),e.jsxs("div",{className:"onchain-trades__item-right",children:[e.jsxs("span",{className:"onchain-trades__amount",children:[t(c.quoteAbs,4)," ",c.quoteSymbol||"SOL"]}),e.jsx("span",{className:"onchain-trades__time",children:p(c.timestamp)})]})]},c.signature))})]})}function w({summary:n}){return e.jsxs("div",{className:"onchain-view",children:[e.jsxs("div",{className:"onchain-metrics",children:[e.jsxs("div",{className:"onchain-metric",children:[e.jsx("span",{className:"onchain-metric__label",children:"TRADES"}),e.jsx("span",{className:"onchain-metric__value",children:n.tradeCount.toLocaleString()})]}),e.jsxs("div",{className:"onchain-metric",children:[e.jsx("span",{className:"onchain-metric__label",children:"WALLETS"}),e.jsx("span",{className:"onchain-metric__value",children:n.uniqueWallets.toLocaleString()})]}),e.jsxs("div",{className:"onchain-metric",children:[e.jsx("span",{className:"onchain-metric__label",children:"TIMEFRAME"}),e.jsx("span",{className:"onchain-metric__value",children:_(n.timeframeSeconds)})]})]}),e.jsx(f,{buy:n.buyQuoteVolume,sell:n.sellQuoteVolume,label:"VOLUME (SOL)"}),e.jsx(b,{value:n.netQuoteVolume}),e.jsx(g,{buyers:n.topNetBuyers,sellers:n.topNetSellers}),e.jsx(x,{trades:n.recentTrades}),e.jsx("div",{className:"onchain-footer",children:e.jsxs("a",{href:`https://solscan.io/token/${n.mint}`,target:"_blank",rel:"noreferrer",className:"onchain-hash",children:[e.jsx("span",{className:"onchain-hash__label",children:"Token"}),e.jsx("span",{className:"onchain-hash__value",children:h(n.mint,8)})]})})]})}function S({summary:n}){return e.jsxs("div",{className:"onchain-view",children:[e.jsxs("div",{className:"onchain-wallet-header",children:[e.jsx("div",{className:"onchain-wallet-icon",children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),e.jsxs("div",{className:"onchain-wallet-info",children:[e.jsx("a",{href:`https://solscan.io/account/${n.wallet}`,target:"_blank",rel:"noreferrer",className:"onchain-wallet-address",children:h(n.wallet,8)}),e.jsxs("span",{className:"onchain-wallet-timeframe",children:[_(n.timeframeSeconds)," activity window"]})]})]}),e.jsxs("div",{className:"onchain-metrics onchain-metrics--4col",children:[e.jsxs("div",{className:"onchain-metric",children:[e.jsx("span",{className:"onchain-metric__label",children:"TRADES"}),e.jsx("span",{className:"onchain-metric__value",children:n.tradeCount.toLocaleString()})]}),e.jsxs("div",{className:"onchain-metric",children:[e.jsx("span",{className:"onchain-metric__label",children:"BUY VOL"}),e.jsxs("span",{className:"onchain-metric__value",children:[t(n.buyQuoteVolume,4)," SOL"]})]}),e.jsxs("div",{className:"onchain-metric",children:[e.jsx("span",{className:"onchain-metric__label",children:"SELL VOL"}),e.jsxs("span",{className:"onchain-metric__value",children:[t(n.sellQuoteVolume,4)," SOL"]})]}),e.jsxs("div",{className:"onchain-metric",children:[e.jsx("span",{className:"onchain-metric__label",children:"NET SOL"}),e.jsxs("span",{className:`onchain-metric__value ${n.netQuoteVolume>0?"onchain-metric__value--positive":n.netQuoteVolume<0?"onchain-metric__value--negative":""}`,children:[t(n.netQuoteVolume,4)," SOL"]})]})]}),n.netUsdChange!==void 0&&n.netUsdChange!==null&&e.jsxs("div",{className:`onchain-pnl ${n.netUsdChange>=0?"onchain-pnl--positive":"onchain-pnl--negative"}`,children:[e.jsx("span",{className:"onchain-pnl__label",children:"NET P&L"}),e.jsxs("span",{className:"onchain-pnl__value",children:[n.netUsdChange>=0?"+":"",v(n.netUsdChange)]})]}),e.jsx(x,{trades:n.trades}),n.mint&&e.jsx("div",{className:"onchain-footer",children:e.jsxs("a",{href:`https://solscan.io/token/${n.mint}`,target:"_blank",rel:"noreferrer",className:"onchain-hash",children:[e.jsx("span",{className:"onchain-hash__label",children:"Token"}),e.jsx("span",{className:"onchain-hash__value",children:h(n.mint,8)})]})})]})}function $(){const n=N("toolOutput");if(!n)return e.jsx("div",{className:"onchain-container",children:e.jsxs("div",{className:"onchain-loading",children:[e.jsx("div",{className:"onchain-loading__spinner"}),e.jsx("span",{children:"Analyzing on-chain activity..."})]})});if(n.ok===!1||n.error)return e.jsx("div",{className:"onchain-container",children:e.jsx("div",{className:"onchain-error",children:n.error||n.message||"Activity lookup failed"})});const s=n.scope||"token",a=n.summary;if(!a)return e.jsx("div",{className:"onchain-container",children:e.jsx("div",{className:"onchain-error",children:"No activity data available"})});const i={token:{label:"Token",icon:"ðŸš€"},wallet:{label:"Wallet",icon:"ðŸ‘¤"},trade:{label:"Trade",icon:"ðŸ“Š"}}[s];return e.jsx("div",{className:"onchain-container",children:e.jsxs("div",{className:"onchain-card",children:[e.jsxs("div",{className:"onchain-card__header",children:[e.jsxs("div",{className:"onchain-card__title-row",children:[e.jsx("span",{className:"onchain-card__icon",children:"ðŸ“Š"}),e.jsx("span",{className:"onchain-card__title",children:"On-Chain Activity"})]}),e.jsxs("span",{className:"onchain-scope-badge",children:[e.jsx("span",{children:i.icon}),e.jsx("span",{children:i.label})]})]}),s==="token"&&e.jsx(w,{summary:a}),s==="wallet"&&e.jsx(S,{summary:a})]})})}const d=document.getElementById("onchain-activity-root");d&&u.createRoot(d).render(e.jsx($,{}));
