import{j as a,u as A,r as w}from"./use-openai-global-C-kWgFLb.js";import{c as D}from"./client-rURR1_t4.js";import{g as P}from"./utils-B17YD0uM.js";function v(...s){for(const e of s)if(typeof e=="string"&&e.trim())return e.trim()}function t(...s){for(const e of s){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const r=Number(e);if(Number.isFinite(r))return r}}}function M(s){if(s)return s.slice(0,4).toUpperCase()}function C(s){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:2}).format(s)}function R(s){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:6}).format(s)}function L(s){return"$"+Math.round(s).toLocaleString("en-US")}function B(s){const e=s/100;return`${e>=0?"+":""}${e.toFixed(2)}%`}function T(s,e){if(s===void 0)return;const r=e&&e>4?4:e??6;return s.toLocaleString("en-US",{maximumFractionDigits:r})}function E(s,e=4,r=4){return s.length<=e+r+3?s:`${s.slice(0,e)}…${s.slice(-r)}`}function H({size:s=14}){return a.jsxs("svg",{width:s,height:s,viewBox:"0 0 128 128",fill:"none",children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"sol-grad",x1:"90%",y1:"0%",x2:"10%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#00FFA3"}),a.jsx("stop",{offset:"100%",stopColor:"#DC1FFF"})]})}),a.jsx("path",{d:"M25.3 93.5c0.9-0.9 2.2-1.5 3.5-1.5h97.1c2.2 0 3.4 2.7 1.8 4.3l-24.2 24.2c-0.9 0.9-2.2 1.5-3.5 1.5H2.9c-2.2 0-3.4-2.7-1.8-4.3L25.3 93.5z",fill:"url(#sol-grad)"}),a.jsx("path",{d:"M25.3 2.5c1-1 2.3-1.5 3.5-1.5h97.1c2.2 0 3.4 2.7 1.8 4.3L103.5 29.5c-0.9 0.9-2.2 1.5-3.5 1.5H2.9c-2.2 0-3.4-2.7-1.8-4.3L25.3 2.5z",fill:"url(#sol-grad)"}),a.jsx("path",{d:"M102.7 47.3c-0.9-0.9-2.2-1.5-3.5-1.5H2.1c-2.2 0-3.4 2.7-1.8 4.3l24.2 24.2c0.9 0.9 2.2 1.5 3.5 1.5h97.1c2.2 0 3.4-2.7 1.8-4.3L102.7 47.3z",fill:"url(#sol-grad)"})]})}function O({symbol:s,imageUrl:e,size:r=42}){const[d,n]=w.useState(!1),i=e&&!d;return a.jsx("div",{className:"balances-token-icon",style:{width:r,height:r},children:i?a.jsx("img",{src:e,alt:s,onError:()=>n(!0),referrerPolicy:"no-referrer"}):a.jsx("span",{className:"balances-token-icon__fallback",children:s.slice(0,2)})})}function q({entry:s,index:e,isExpanded:r,onToggle:d}){const n=s.token,i=v(s.mint),_=v(n?.symbol)??M(i)??`Token ${e+1}`,g=v(n?.name)??_,N=v(n?.imageUrl,n?.logoUri,s.icon,s.logo,i?P(i):void 0),h=v(n?.headerImageUrl,n?.openGraphImageUrl),b=t(s.amountUi,s.amount_ui),U=T(b,s.decimals),p=t(n?.priceUsd,n?.price_usd),j=p!==void 0?R(p):void 0,l=t(n?.priceChange24h,n?.price_change_24h),c=l!==void 0?B(l):void 0,m=l!==void 0&&l>=0,o=t(n?.holdingUsd,n?.balanceUsd,n?.balance_usd)??(p&&b?p*b:void 0),u=o!==void 0?L(o):void 0,y=t(n?.marketCap,n?.market_cap),x=y!==void 0?C(y):void 0,S=t(n?.volume24hUsd,n?.volume24h),k=S!==void 0?C(S):void 0,$=t(n?.liquidityUsd,n?.liquidity_usd),F=$!==void 0?C($):void 0;return a.jsxs("div",{className:`balances-card ${r?"balances-card--expanded":""} ${m?"balances-card--positive":"balances-card--negative"}`,onClick:d,children:[h&&a.jsx("div",{className:"balances-card__banner",style:{backgroundImage:`url(${h})`}}),a.jsx("div",{className:`balances-card__glow ${m?"balances-card__glow--positive":"balances-card__glow--negative"}`}),a.jsxs("div",{className:"balances-card__content",children:[a.jsxs("div",{className:"balances-card__header",children:[a.jsxs("div",{className:"balances-card__token",children:[a.jsx(O,{symbol:_,imageUrl:N,size:r?56:42}),a.jsxs("div",{className:"balances-card__token-info",children:[a.jsx("span",{className:`balances-card__symbol ${r?"balances-card__symbol--large":""}`,children:_}),a.jsx("span",{className:"balances-card__name",children:g})]})]}),a.jsxs("div",{className:"balances-card__value",children:[a.jsx("span",{className:`balances-card__holding ${r?"balances-card__holding--large":""}`,children:u??"—"}),a.jsx("span",{className:"balances-card__amount",children:U})]})]}),a.jsx("div",{className:"balances-card__divider"}),!r&&a.jsxs("div",{className:"balances-card__footer",children:[a.jsxs("div",{className:"balances-card__price-row",children:[a.jsx("span",{className:"balances-card__price",children:j??"—"}),a.jsx("span",{className:`balances-card__change ${m?"balances-card__change--positive":"balances-card__change--negative"}`,children:c??"—"})]}),k&&a.jsxs("span",{className:"balances-card__volume",children:["VOL ",k]})]}),r&&a.jsxs("div",{className:"balances-card__details",children:[a.jsxs("div",{className:"balances-card__metrics",children:[a.jsxs("div",{className:"balances-card__metric",children:[a.jsx("span",{className:"balances-card__metric-label",children:"PRICE"}),a.jsx("span",{className:"balances-card__metric-value",children:j??"—"})]}),a.jsxs("div",{className:"balances-card__metric",children:[a.jsx("span",{className:"balances-card__metric-label",children:"24H CHANGE"}),a.jsx("span",{className:`balances-card__metric-value ${m?"balances-card__change--positive":"balances-card__change--negative"}`,children:c??"—"})]}),x&&a.jsxs("div",{className:"balances-card__metric",children:[a.jsx("span",{className:"balances-card__metric-label",children:"MCAP"}),a.jsx("span",{className:"balances-card__metric-value",children:x})]}),k&&a.jsxs("div",{className:"balances-card__metric",children:[a.jsx("span",{className:"balances-card__metric-label",children:"VOL (24H)"}),a.jsx("span",{className:"balances-card__metric-value",children:k})]}),F&&a.jsxs("div",{className:"balances-card__metric",children:[a.jsx("span",{className:"balances-card__metric-label",children:"LIQUIDITY"}),a.jsx("span",{className:"balances-card__metric-value",children:F})]})]}),a.jsxs("div",{className:"balances-card__links",children:[i&&a.jsx("span",{className:"balances-card__mint",title:i,children:E(i)}),a.jsx("div",{className:"balances-card__external-links",children:i&&a.jsxs(a.Fragment,{children:[a.jsx("a",{href:`https://solscan.io/token/${i}`,target:"_blank",rel:"noreferrer",onClick:f=>f.stopPropagation(),children:"Solscan"}),a.jsx("a",{href:`https://birdeye.so/token/${i}`,target:"_blank",rel:"noreferrer",onClick:f=>f.stopPropagation(),children:"Birdeye"}),a.jsx("a",{href:`https://dexscreener.com/solana/${i}`,target:"_blank",rel:"noreferrer",onClick:f=>f.stopPropagation(),children:"Dexscreener"})]})})]})]})]})]})}function G(){const s=A("toolOutput"),[e,r]=w.useState(null),[d,n]=w.useState(!1),i=Array.isArray(s)?s:Array.isArray(s?.balances)?s.balances:[];if(!s)return a.jsx("div",{className:"balances-container",children:a.jsxs("div",{className:"balances-loading",children:[a.jsx("div",{className:"balances-loading__spinner"}),a.jsx("span",{children:"Loading balances..."})]})});if(i.length===0)return a.jsx("div",{className:"balances-container",children:a.jsx("div",{className:"balances-empty",children:"No balances detected for this wallet."})});let _=0,g=0;for(const l of i){const c=l.token,m=t(c?.holdingUsd,c?.balanceUsd,c?.balance_usd),o=t(c?.priceUsd,c?.price_usd),u=t(l.amountUi,l.amount_ui);v(c?.symbol)==="SOL"&&o&&(g=o);const x=m??(o&&u?o*u:0);x&&Number.isFinite(x)&&(_+=x)}const N=g>0?_/g:void 0,h=l=>{const c=l.token,m=t(c?.holdingUsd,c?.balanceUsd,c?.balance_usd),o=t(c?.priceUsd,c?.price_usd),u=t(l.amountUi,l.amount_ui);return m??(o&&u?o*u:0)??0},b=i.filter(l=>h(l)>0).sort((l,c)=>h(c)-h(l)),U=i.filter(l=>h(l)<=0),p=d?[...b,...U]:b.slice(0,6),j=d?0:Math.max(0,b.length-6)+U.length;return a.jsxs("div",{className:"balances-container",children:[a.jsxs("div",{className:"balances-total",children:[a.jsx("div",{className:"balances-total__gradient"}),a.jsxs("div",{className:"balances-total__content",children:[a.jsx("span",{className:"balances-total__label",children:"Total Portfolio"}),a.jsx("span",{className:"balances-total__value",children:L(_)}),N!==void 0&&a.jsxs("span",{className:"balances-total__sol",children:[a.jsx(H,{size:14}),a.jsx("span",{children:N.toLocaleString("en-US",{maximumFractionDigits:0})})]})]})]}),a.jsx("div",{className:"balances-grid",children:p.map((l,c)=>a.jsx(q,{entry:l,index:c,isExpanded:e===c,onToggle:()=>r(e===c?null:c)},`${c}-${l.mint||l.ata||"unknown"}`))}),j>0&&a.jsx("button",{className:"balances-show-more",onClick:()=>n(!d),children:d?"Collapse List":`Show ${j} more assets`})]})}const I=document.getElementById("solana-balances-root");I&&D.createRoot(I).render(a.jsx(G,{}));
