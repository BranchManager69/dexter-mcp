import{r as h,j as o,u as E}from"./use-openai-global-C-kWgFLb.js";import{c as F}from"./client-rURR1_t4.js";import{u as T,a as R,b as A}from"./use-theme-CaBmE5zi.js";function D(){return h.useCallback(e=>{if(typeof window>"u"||!window.openai?.openExternal){window?.open(e,"_blank","noopener,noreferrer");return}window.openai.openExternal({href:e})},[])}function m(...e){for(const n of e)if(typeof n=="string"&&n.trim())return n.trim()}function r(...e){for(const n of e){if(typeof n=="number"&&Number.isFinite(n))return n;if(typeof n=="string"){const s=Number(n);if(Number.isFinite(s))return s}}}function k(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:2}).format(e)}function G(e){const n=e<.01?6:e<1?4:2;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:n}).format(e)}function O(e){return`${e>=0?"+":""}${e.toFixed(2)}%`}function P(e,n=4,s=4){return e.length<=n+s+3?e:`${e.slice(0,n)}…${e.slice(-s)}`}function Q({symbol:e,imageUrl:n,size:s=64}){const[i,a]=h.useState(!1),c=n&&!i;return o.jsx("div",{className:"token-lookup-icon",style:{width:s,height:s},children:c?o.jsx("img",{src:n,alt:e,onError:()=>a(!0),referrerPolicy:"no-referrer"}):o.jsx("span",{className:"token-lookup-icon__fallback",style:{fontSize:s*.3},children:e.slice(0,2)})})}function q({token:e}){const{callTool:n}=R(),s=A(),i=D(),[a,c]=h.useState(!1),l=e.info,t=m(e.address,e.mint),d=m(e.symbol,l?.symbol)??"UNKNOWN",w=m(e.name,l?.name)??d,C=m(l?.imageUrl,l?.openGraphImageUrl,l?.headerImageUrl,e.logoURI,e.icon,e.logo,e.image),_=r(e.priceUsd,e.price_usd),U=_!==void 0?G(_):void 0,u=r(e.priceChange24h,e.price_change_24h,e.priceChange24hPct),x=u!==void 0?O(u):void 0,p=u!==void 0&&u>=0,f=r(e.marketCap,e.market_cap,e.fdvUsd),N=f!==void 0?k(f):void 0,v=r(e.volume24hUsd,e.volume24h),j=v!==void 0?k(v):void 0,g=r(e.liquidityUsd,e.liquidity_usd),b=g!==void 0?k(g):void 0,S=async()=>{t&&(c(!0),await n("solana_swap_preview",{outputMint:t,amount:1}),c(!1))},I=async()=>{t&&await n("slippage_sentinel",{token_out:t})},$=async()=>{await s(`Give me a detailed analysis of ${d} (${t})`)};return o.jsxs("div",{className:`token-lookup-card ${p?"token-lookup-card--positive":"token-lookup-card--negative"}`,children:[o.jsx("div",{className:`token-lookup-card__glow ${p?"token-lookup-card__glow--positive":"token-lookup-card__glow--negative"}`}),o.jsxs("div",{className:"token-lookup-card__content",children:[o.jsxs("div",{className:"token-lookup-card__header",children:[o.jsx(Q,{symbol:d,imageUrl:C,size:64}),o.jsxs("div",{className:"token-lookup-card__info",children:[o.jsx("h3",{className:"token-lookup-card__name",children:w}),o.jsx("span",{className:"token-lookup-card__symbol",children:d})]}),o.jsxs("div",{className:"token-lookup-card__price-block",children:[o.jsx("span",{className:"token-lookup-card__price",children:U??"—"}),x&&o.jsx("span",{className:`token-lookup-card__change ${p?"token-lookup-card__change--positive":"token-lookup-card__change--negative"}`,children:x})]})]}),o.jsxs("div",{className:"token-lookup-card__metrics",children:[N&&o.jsxs("div",{className:"token-lookup-card__metric",children:[o.jsx("span",{className:"token-lookup-card__metric-label",children:"MCAP"}),o.jsx("span",{className:"token-lookup-card__metric-value",children:N})]}),j&&o.jsxs("div",{className:"token-lookup-card__metric",children:[o.jsx("span",{className:"token-lookup-card__metric-label",children:"VOL (24H)"}),o.jsx("span",{className:"token-lookup-card__metric-value",children:j})]}),b&&o.jsxs("div",{className:"token-lookup-card__metric",children:[o.jsx("span",{className:"token-lookup-card__metric-label",children:"LIQUIDITY"}),o.jsx("span",{className:"token-lookup-card__metric-value",children:b})]})]}),o.jsxs("div",{className:"token-lookup-card__actions",children:[o.jsx("button",{className:"token-action-btn token-action-btn--primary",onClick:S,disabled:a,children:a?"Getting Quote...":"Get Swap Quote"}),o.jsx("button",{className:"token-action-btn",onClick:I,children:"Check Slippage"}),o.jsx("button",{className:"token-action-btn",onClick:$,children:"Deep Analysis"})]}),o.jsxs("div",{className:"token-lookup-card__footer",children:[t&&o.jsx("span",{className:"token-lookup-card__mint",title:t,children:P(t)}),o.jsx("div",{className:"token-lookup-card__links",children:t&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"token-link-btn",onClick:()=>i(`https://solscan.io/token/${t}`),children:"Solscan"}),o.jsx("button",{className:"token-link-btn",onClick:()=>i(`https://birdeye.so/token/${t}`),children:"Birdeye"}),o.jsx("button",{className:"token-link-btn",onClick:()=>i(`https://dexscreener.com/solana/${t}`),children:"Chart"})]})})]})]})]})}function L(){const e=E("toolOutput"),n=T();if(!e)return o.jsx("div",{className:"token-lookup-container","data-theme":n,children:o.jsxs("div",{className:"token-lookup-loading",children:[o.jsx("div",{className:"token-lookup-loading__skeleton"}),o.jsx("div",{className:"token-lookup-loading__skeleton token-lookup-loading__skeleton--small"})]})});let s=[];if(Array.isArray(e.results)?s=e.results:e.result?s=[e.result]:e.token?s=[e.token]:(e.address||e.mint||e.symbol)&&(s=[e]),s.length===0)return o.jsx("div",{className:"token-lookup-container","data-theme":n,children:o.jsx("div",{className:"token-lookup-empty",children:"No tokens found."})});const i=s.slice(0,3);return o.jsxs("div",{className:"token-lookup-container","data-theme":n,children:[o.jsx("div",{className:"token-lookup-header",children:o.jsx("span",{className:"token-lookup-title",children:"Token Analysis"})}),o.jsx("div",{className:"token-lookup-list",children:i.map((a,c)=>o.jsx(q,{token:a},a.address||a.mint||c))})]})}const y=document.getElementById("solana-token-lookup-root");y&&F.createRoot(y).render(o.jsx(L,{}));
