import{j as o,u as F,r as y}from"./use-openai-global-C-kWgFLb.js";import{c as T}from"./client-rURR1_t4.js";import{u as E,a as R}from"./use-theme-Bge9D-4o.js";import{u as A}from"./use-send-followup-C7M1JOv-.js";import{u as D}from"./use-open-external-CCjEvhCn.js";function u(...e){for(const s of e)if(typeof s=="string"&&s.trim())return s.trim()}function r(...e){for(const s of e){if(typeof s=="number"&&Number.isFinite(s))return s;if(typeof s=="string"){const n=Number(s);if(Number.isFinite(n))return n}}}function k(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:2}).format(e)}function G(e){const s=e<.01?6:e<1?4:2;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:s}).format(e)}function O(e){return`${e>=0?"+":""}${e.toFixed(2)}%`}function P(e,s=4,n=4){return e.length<=s+n+3?e:`${e.slice(0,s)}…${e.slice(-n)}`}function Q({symbol:e,imageUrl:s,size:n=64}){const[i,a]=y.useState(!1),c=s&&!i;return o.jsx("div",{className:"token-lookup-icon",style:{width:n,height:n},children:c?o.jsx("img",{src:s,alt:e,onError:()=>a(!0),referrerPolicy:"no-referrer"}):o.jsx("span",{className:"token-lookup-icon__fallback",style:{fontSize:n*.3},children:e.slice(0,2)})})}function q({token:e}){const{callTool:s}=R(),n=A(),i=D(),[a,c]=y.useState(!1),l=e.info,t=u(e.address,e.mint),d=u(e.symbol,l?.symbol)??"UNKNOWN",w=u(e.name,l?.name)??d,C=u(l?.imageUrl,l?.openGraphImageUrl,l?.headerImageUrl,e.logoURI,e.icon,e.logo,e.image),h=r(e.priceUsd,e.price_usd),U=h!==void 0?G(h):void 0,m=r(e.priceChange24h,e.price_change_24h,e.priceChange24hPct),_=m!==void 0?O(m):void 0,p=m!==void 0&&m>=0,x=r(e.marketCap,e.market_cap,e.fdvUsd),N=x!==void 0?k(x):void 0,f=r(e.volume24hUsd,e.volume24h),v=f!==void 0?k(f):void 0,j=r(e.liquidityUsd,e.liquidity_usd),g=j!==void 0?k(j):void 0,S=async()=>{t&&(c(!0),await s("solana_swap_preview",{outputMint:t,amount:1}),c(!1))},I=async()=>{t&&await s("slippage_sentinel",{token_out:t})},$=async()=>{await n(`Give me a detailed analysis of ${d} (${t})`)};return o.jsxs("div",{className:`token-lookup-card ${p?"token-lookup-card--positive":"token-lookup-card--negative"}`,children:[o.jsx("div",{className:`token-lookup-card__glow ${p?"token-lookup-card__glow--positive":"token-lookup-card__glow--negative"}`}),o.jsxs("div",{className:"token-lookup-card__content",children:[o.jsxs("div",{className:"token-lookup-card__header",children:[o.jsx(Q,{symbol:d,imageUrl:C,size:64}),o.jsxs("div",{className:"token-lookup-card__info",children:[o.jsx("h3",{className:"token-lookup-card__name",children:w}),o.jsx("span",{className:"token-lookup-card__symbol",children:d})]}),o.jsxs("div",{className:"token-lookup-card__price-block",children:[o.jsx("span",{className:"token-lookup-card__price",children:U??"—"}),_&&o.jsx("span",{className:`token-lookup-card__change ${p?"token-lookup-card__change--positive":"token-lookup-card__change--negative"}`,children:_})]})]}),o.jsxs("div",{className:"token-lookup-card__metrics",children:[N&&o.jsxs("div",{className:"token-lookup-card__metric",children:[o.jsx("span",{className:"token-lookup-card__metric-label",children:"MCAP"}),o.jsx("span",{className:"token-lookup-card__metric-value",children:N})]}),v&&o.jsxs("div",{className:"token-lookup-card__metric",children:[o.jsx("span",{className:"token-lookup-card__metric-label",children:"VOL (24H)"}),o.jsx("span",{className:"token-lookup-card__metric-value",children:v})]}),g&&o.jsxs("div",{className:"token-lookup-card__metric",children:[o.jsx("span",{className:"token-lookup-card__metric-label",children:"LIQUIDITY"}),o.jsx("span",{className:"token-lookup-card__metric-value",children:g})]})]}),o.jsxs("div",{className:"token-lookup-card__actions",children:[o.jsx("button",{className:"token-action-btn token-action-btn--primary",onClick:S,disabled:a,children:a?"Getting Quote...":"Get Swap Quote"}),o.jsx("button",{className:"token-action-btn",onClick:I,children:"Check Slippage"}),o.jsx("button",{className:"token-action-btn",onClick:$,children:"Deep Analysis"})]}),o.jsxs("div",{className:"token-lookup-card__footer",children:[t&&o.jsx("span",{className:"token-lookup-card__mint",title:t,children:P(t)}),o.jsx("div",{className:"token-lookup-card__links",children:t&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"token-link-btn",onClick:()=>i(`https://solscan.io/token/${t}`),children:"Solscan"}),o.jsx("button",{className:"token-link-btn",onClick:()=>i(`https://birdeye.so/token/${t}`),children:"Birdeye"}),o.jsx("button",{className:"token-link-btn",onClick:()=>i(`https://dexscreener.com/solana/${t}`),children:"Chart"})]})})]})]})]})}function L(){const e=F("toolOutput"),s=E();if(!e)return o.jsx("div",{className:"token-lookup-container","data-theme":s,children:o.jsxs("div",{className:"token-lookup-loading",children:[o.jsx("div",{className:"token-lookup-loading__skeleton"}),o.jsx("div",{className:"token-lookup-loading__skeleton token-lookup-loading__skeleton--small"})]})});let n=[];if(Array.isArray(e.results)?n=e.results:e.result?n=[e.result]:e.token?n=[e.token]:(e.address||e.mint||e.symbol)&&(n=[e]),n.length===0)return o.jsx("div",{className:"token-lookup-container","data-theme":s,children:o.jsx("div",{className:"token-lookup-empty",children:"No tokens found."})});const i=n.slice(0,3);return o.jsxs("div",{className:"token-lookup-container","data-theme":s,children:[o.jsx("div",{className:"token-lookup-header",children:o.jsx("span",{className:"token-lookup-title",children:"Token Analysis"})}),o.jsx("div",{className:"token-lookup-list",children:i.map((a,c)=>o.jsx(q,{token:a},a.address||a.mint||c))})]})}const b=document.getElementById("solana-token-lookup-root");b&&T.createRoot(b).render(o.jsx(L,{}));
