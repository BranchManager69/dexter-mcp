import{j as s,u as F,r as U}from"./use-openai-global-C-kWgFLb.js";/* empty css                    */import{c as E}from"./client-rURR1_t4.js";import{g as x}from"./utils-B17YD0uM.js";function t(...a){for(const e of a)if(typeof e=="string"&&e.trim())return e.trim()}function l(...a){for(const e of a){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const n=Number(e);if(Number.isFinite(n))return n}}}function g(a){return a?a.slice(0,4).toUpperCase():"TOKEN"}function h(a){return a===void 0?"—":Math.abs(a)>=1?a.toLocaleString("en-US",{maximumFractionDigits:4}):a.toLocaleString("en-US",{maximumFractionDigits:6})}function T(a){return a===void 0?"—":`${a>=0?"+":""}${a.toFixed(2)}%`}function j(a,e=6,n=4){return a.length<=e+n+3?a:`${a.slice(0,e)}…${a.slice(-n)}`}function N({symbol:a,imageUrl:e,size:n=56}){const[r,i]=U.useState(!1),c=e&&!r;return s.jsx("div",{className:"swap-token-icon",style:{width:n,height:n},children:c?s.jsx("img",{src:e,alt:a,onError:()=>i(!0),referrerPolicy:"no-referrer"}):s.jsx("span",{className:"swap-token-icon__fallback",style:{fontSize:n*.3},children:a.slice(0,2)})})}function L({status:a}){const e={confirmed:{label:"Confirmed",className:"swap-status-badge--success"},pending:{label:"Pending",className:"swap-status-badge--pending"},failed:{label:"Failed",className:"swap-status-badge--error"}}[a];return s.jsxs("span",{className:`swap-status-badge ${e.className}`,children:[a==="confirmed"&&s.jsx("span",{className:"swap-status-badge__icon",children:"✓"}),a==="pending"&&s.jsx("span",{className:"swap-status-badge__icon swap-status-badge__icon--pulse",children:"●"}),a==="failed"&&s.jsx("span",{className:"swap-status-badge__icon",children:"✕"}),e.label]})}function M({fromSymbol:a,fromAmount:e,fromImage:n,toSymbol:r,toAmount:i,toImage:c}){return s.jsxs("div",{className:"swap-flow",children:[s.jsxs("div",{className:"swap-flow__side",children:[s.jsx(N,{symbol:a,imageUrl:n,size:56}),s.jsxs("div",{className:"swap-flow__info",children:[s.jsx("span",{className:"swap-flow__amount",children:e}),s.jsx("span",{className:"swap-flow__symbol",children:a})]})]}),s.jsx("div",{className:"swap-flow__arrow",children:s.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",children:s.jsx("path",{d:"M5 12h14M13 6l6 6-6 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),s.jsxs("div",{className:"swap-flow__side swap-flow__side--to",children:[s.jsx(N,{symbol:r,imageUrl:c,size:56}),s.jsxs("div",{className:"swap-flow__info",children:[s.jsx("span",{className:"swap-flow__amount swap-flow__amount--receive",children:i}),s.jsx("span",{className:"swap-flow__symbol",children:r})]})]})]})}function $(){const a=F("toolOutput"),e=a?a.result??a:null;if(!e)return s.jsx("div",{className:"swap-container",children:s.jsxs("div",{className:"swap-loading",children:[s.jsx("div",{className:"swap-loading__spinner"}),s.jsx("span",{children:"Executing swap..."})]})});const n=t(e.inputMint),r=t(e.outputMint),i=t(e.inputToken?.symbol)??g(n),c=t(e.outputToken?.symbol)??g(r),b=t(e.inputToken?.imageUrl,e.inputToken?.logoUri,e.inputLogo,n?x(n):void 0),k=t(e.outputToken?.imageUrl,e.outputToken?.logoUri,e.outputLogo,r?x(r):void 0),S=l(e.amountUi),y=l(e.outputAmountUi,e.expectedOutputUi),d=l(e.priceImpactPct),u=l(e.slippageBps),w=l(e.networkFeeSol),o=t(e.txSignature,e.transactionSignature,e.signature);t(e.swapId);const _=t(e.walletAddress),p=t(e.status)?.toLowerCase(),m=p==="confirmed"||p==="success"?"confirmed":p==="failed"||p==="error"?"failed":o?"confirmed":"pending",I=d!==void 0&&d<0,f=o?`https://solscan.io/tx/${o}`:null;return s.jsx("div",{className:"swap-container",children:s.jsxs("div",{className:`swap-card ${m==="confirmed"?"swap-card--success":""}`,children:[m==="confirmed"&&s.jsx("div",{className:"swap-card__glow swap-card__glow--success"}),s.jsxs("div",{className:"swap-card__header",children:[s.jsx("span",{className:"swap-card__title",children:"Swap Execution"}),s.jsx(L,{status:m})]}),s.jsx(M,{fromSymbol:i,fromAmount:h(S),fromImage:b,toSymbol:c,toAmount:h(y),toImage:k}),s.jsxs("div",{className:"swap-card__metrics",children:[d!==void 0&&s.jsxs("div",{className:"swap-card__metric",children:[s.jsx("span",{className:"swap-card__metric-label",children:"Price Impact"}),s.jsx("span",{className:`swap-card__metric-value ${I?"swap-card__metric-value--negative":"swap-card__metric-value--positive"}`,children:T(d)})]}),u!==void 0&&s.jsxs("div",{className:"swap-card__metric",children:[s.jsx("span",{className:"swap-card__metric-label",children:"Slippage"}),s.jsxs("span",{className:"swap-card__metric-value",children:[(u/100).toFixed(2),"%"]})]}),w!==void 0&&s.jsxs("div",{className:"swap-card__metric",children:[s.jsx("span",{className:"swap-card__metric-label",children:"Network Fee"}),s.jsxs("span",{className:"swap-card__metric-value",children:[w.toFixed(6)," SOL"]})]})]}),o&&s.jsxs("div",{className:"swap-card__signature",children:[s.jsx("span",{className:"swap-card__signature-label",children:"Transaction"}),s.jsx("span",{className:"swap-card__signature-value",children:j(o)})]}),s.jsxs("div",{className:"swap-card__footer",children:[_&&s.jsxs("span",{className:"swap-card__wallet",children:["Wallet: ",j(_)]}),s.jsx("div",{className:"swap-card__links",children:f&&s.jsx("a",{href:f,target:"_blank",rel:"noreferrer",className:"swap-card__link",children:"Solscan"})})]})]})})}const v=document.getElementById("solana-swap-execute-root");v&&E.createRoot(v).render(s.jsx($,{}));
