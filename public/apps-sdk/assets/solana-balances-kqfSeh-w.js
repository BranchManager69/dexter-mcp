import{j as e,u as M,r as F}from"./use-openai-global-D7K5F0u7.js";import{E as k,a as w,B as I}from"./EmptyMessage-nIV1zrJl.js";import{c as P}from"./client-CWA1JIkp.js";import{C as A,a as E}from"./ChevronUp-6bMv8VMu.js";import{C as R}from"./CreditCard-D9ZoJ7mR.js";import{E as S}from"./ExternalLink-BW03B-CW.js";import{g as T}from"./utils-B17YD0uM.js";const O=s=>e.jsx("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...s,children:e.jsx("path",{d:"M14 7C14 6.44772 14.4477 6 15 6H21C21.5523 6 22 6.44772 22 7V13C22 13.5523 21.5523 14 21 14C20.4477 14 20 13.5523 20 13V9.41421L13.2071 16.2071C12.8166 16.5976 12.1834 16.5976 11.7929 16.2071L8.5 12.9142L3.70711 17.7071C3.31658 18.0976 2.68342 18.0976 2.29289 17.7071C1.90237 17.3166 1.90237 16.6834 2.29289 16.2929L7.79289 10.7929C8.18342 10.4024 8.81658 10.4024 9.20711 10.7929L12.5 14.0858L18.5858 8H15C14.4477 8 14 7.55228 14 7Z",fill:"currentColor"})});function N(...s){for(const t of s)if(typeof t=="string"&&t.trim())return t.trim()}function c(...s){for(const t of s){if(typeof t=="number"&&Number.isFinite(t))return t;if(typeof t=="string"){const a=Number(t);if(Number.isFinite(a))return a}}}function q(s){if(s)return s.slice(0,4).toUpperCase()}function L(s){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:2}).format(s)}function H(s){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:6}).format(s)}function D(s){return"$"+Math.round(s).toLocaleString("en-US")}function V(s){const t=s/100;return`${t>=0?"+":""}${t.toFixed(2)}%`}function G(s,t){if(s===void 0)return;const a=t&&t>4?4:t??6;return s.toLocaleString("en-US",{maximumFractionDigits:a})}function X(s,t=4,a=4){return s.length<=t+a+3?s:`${s.slice(0,t)}…${s.slice(-a)}`}function Z({className:s}){return e.jsxs("svg",{viewBox:"0 0 128 128",fill:"none",className:s,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"sol-bal-grad",x1:"90%",y1:"0%",x2:"10%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#00FFA3"}),e.jsx("stop",{offset:"100%",stopColor:"#DC1FFF"})]})}),e.jsx("path",{d:"M25.3 93.5c0.9-0.9 2.2-1.5 3.5-1.5h97.1c2.2 0 3.4 2.7 1.8 4.3l-24.2 24.2c-0.9 0.9-2.2 1.5-3.5 1.5H2.9c-2.2 0-3.4-2.7-1.8-4.3L25.3 93.5z",fill:"url(#sol-bal-grad)"}),e.jsx("path",{d:"M25.3 2.5c1-1 2.3-1.5 3.5-1.5h97.1c2.2 0 3.4 2.7 1.8 4.3L103.5 29.5c-0.9 0.9-2.2 1.5-3.5 1.5H2.9c-2.2 0-3.4-2.7-1.8-4.3L25.3 2.5z",fill:"url(#sol-bal-grad)"}),e.jsx("path",{d:"M102.7 47.3c-0.9-0.9-2.2-1.5-3.5-1.5H2.1c-2.2 0-3.4 2.7-1.8 4.3l24.2 24.2c0.9 0.9 2.2 1.5 3.5 1.5h97.1c2.2 0 3.4-2.7 1.8-4.3L102.7 47.3z",fill:"url(#sol-bal-grad)"})]})}function J({symbol:s,imageUrl:t,size:a="md"}){const[m,n]=F.useState(!1),o=t&&!m,l={sm:"size-8",md:"size-10",lg:"size-14"};return e.jsx("div",{className:`${l[a]} rounded-xl overflow-hidden bg-surface-secondary flex items-center justify-center flex-shrink-0`,children:o?e.jsx("img",{src:t,alt:s,onError:()=>n(!0),referrerPolicy:"no-referrer",className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-sm font-bold text-secondary",children:s.slice(0,2)})})}function K({entry:s,index:t,isExpanded:a,onToggle:m}){const n=s.token,o=N(s.mint),l=N(n?.symbol)??q(o)??`Token ${t+1}`,g=N(n?.name)??l,y=N(n?.imageUrl,n?.logoUri,s.icon,s.logo,o?T(o):void 0),x=c(s.amountUi,s.amount_ui),v=G(x,s.decimals),h=c(n?.priceUsd,n?.price_usd),C=h!==void 0?H(h):void 0,p=c(n?.priceChange24h,n?.price_change_24h),i=p!==void 0?V(p):void 0,r=p!==void 0&&p>=0,f=c(n?.holdingUsd,n?.balanceUsd,n?.balance_usd)??(h&&x?h*x:void 0),d=f!==void 0?D(f):void 0,u=c(n?.marketCap,n?.market_cap),z=u!==void 0?L(u):void 0,j=c(n?.volume24hUsd,n?.volume24h),U=j!==void 0?L(j):void 0,$=c(n?.liquidityUsd,n?.liquidity_usd),_=$!==void 0?L($):void 0;return e.jsxs("div",{className:`rounded-xl border p-4 cursor-pointer transition-all hover:border-default-strong ${a?"border-accent/30 bg-accent/5":"border-default bg-surface"}`,onClick:m,children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx(J,{symbol:l,imageUrl:y,size:a?"lg":"md"}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`font-semibold text-primary ${a?"text-lg":"text-sm"}`,children:l}),i&&e.jsx(I,{color:r?"success":"danger",size:"sm",variant:"soft",children:i})]}),e.jsx("div",{className:"text-xs text-tertiary truncate",children:g})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-right",children:[e.jsxs("div",{children:[e.jsx("div",{className:`font-semibold text-primary ${a?"text-lg":"text-sm"}`,children:d??"—"}),e.jsx("div",{className:"text-xs text-tertiary",children:v})]}),e.jsx("div",{className:"text-tertiary",children:a?e.jsx(A,{className:"size-4"}):e.jsx(E,{className:"size-4"})})]})]}),!a&&e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-subtle",children:[e.jsx("span",{className:"text-xs text-tertiary",children:C??"—"}),U&&e.jsxs("span",{className:"text-xs text-tertiary",children:["VOL ",U]})]}),a&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-subtle space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-tertiary uppercase tracking-wide",children:"Price"}),e.jsx("div",{className:"text-sm font-medium text-primary mt-0.5",children:C??"—"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-tertiary uppercase tracking-wide",children:"24h Change"}),e.jsx("div",{className:`text-sm font-medium mt-0.5 ${r?"text-success":"text-danger"}`,children:i??"—"})]}),z&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-tertiary uppercase tracking-wide",children:"Market Cap"}),e.jsx("div",{className:"text-sm font-medium text-primary mt-0.5",children:z})]}),U&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-tertiary uppercase tracking-wide",children:"Volume 24h"}),e.jsx("div",{className:"text-sm font-medium text-primary mt-0.5",children:U})]}),_&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-tertiary uppercase tracking-wide",children:"Liquidity"}),e.jsx("div",{className:"text-sm font-medium text-primary mt-0.5",children:_})]})]}),o&&e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("code",{className:"text-xs text-tertiary font-mono",children:X(o,6,4)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:`https://solscan.io/token/${o}`,target:"_blank",rel:"noopener noreferrer",onClick:b=>b.stopPropagation(),children:e.jsx(w,{color:"secondary",variant:"ghost",size:"xs",children:e.jsxs("span",{className:"flex items-center gap-1",children:["Solscan",e.jsx(S,{className:"size-3"})]})})}),e.jsx("a",{href:`https://birdeye.so/token/${o}`,target:"_blank",rel:"noopener noreferrer",onClick:b=>b.stopPropagation(),children:e.jsx(w,{color:"secondary",variant:"ghost",size:"xs",children:e.jsxs("span",{className:"flex items-center gap-1",children:["Birdeye",e.jsx(S,{className:"size-3"})]})})}),e.jsx("a",{href:`https://dexscreener.com/solana/${o}`,target:"_blank",rel:"noopener noreferrer",onClick:b=>b.stopPropagation(),children:e.jsx(w,{color:"secondary",variant:"ghost",size:"xs",children:e.jsxs("span",{className:"flex items-center gap-1",children:["DEX",e.jsx(S,{className:"size-3"})]})})})]})]})]})]})}function Q(){const s=M("toolOutput"),[t,a]=F.useState(null),[m,n]=F.useState(!1),o=Array.isArray(s)?s:Array.isArray(s?.balances)?s.balances:[];if(!s)return e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-3 py-8",children:[e.jsx("div",{className:"size-5 border-2 border-primary/30 border-t-primary rounded-full animate-spin"}),e.jsx("span",{className:"text-secondary text-sm",children:"Loading balances..."})]})});if(o.length===0)return e.jsx("div",{className:"p-4",children:e.jsxs(k,{fill:"none",children:[e.jsx(k.Icon,{children:e.jsx(R,{className:"size-8"})}),e.jsx(k.Title,{children:"No Balances Found"}),e.jsx(k.Description,{children:"No token balances detected for this wallet."})]})});let l=0,g=0;for(const i of o){const r=i.token,f=c(r?.holdingUsd,r?.balanceUsd,r?.balance_usd),d=c(r?.priceUsd,r?.price_usd),u=c(i.amountUi,i.amount_ui);N(r?.symbol)==="SOL"&&d&&(g=d);const j=f??(d&&u?d*u:0);j&&Number.isFinite(j)&&(l+=j)}const y=g>0?l/g:void 0,x=i=>{const r=i.token,f=c(r?.holdingUsd,r?.balanceUsd,r?.balance_usd),d=c(r?.priceUsd,r?.price_usd),u=c(i.amountUi,i.amount_ui);return f??(d&&u?d*u:0)??0},v=o.filter(i=>x(i)>0).sort((i,r)=>x(r)-x(i)),h=o.filter(i=>x(i)<=0),C=m?[...v,...h]:v.slice(0,6),p=m?0:Math.max(0,v.length-6)+h.length;return e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"rounded-xl border border-accent/30 bg-gradient-to-br from-accent/10 to-transparent p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-tertiary text-xs uppercase tracking-wide mb-1",children:[e.jsx(O,{className:"size-4"}),"Total Portfolio"]}),e.jsx("div",{className:"text-3xl font-bold text-primary",children:D(l)}),y!==void 0&&e.jsxs("div",{className:"flex items-center gap-1.5 mt-2 text-sm text-secondary",children:[e.jsx(Z,{className:"size-4"}),e.jsxs("span",{children:[y.toLocaleString("en-US",{maximumFractionDigits:0})," SOL"]})]})]}),e.jsx("div",{className:"space-y-3",children:C.map((i,r)=>e.jsx(K,{entry:i,index:r,isExpanded:t===r,onToggle:()=>a(t===r?null:r)},`${r}-${i.mint||i.ata||"unknown"}`))}),p>0&&e.jsx(w,{color:"secondary",variant:"soft",size:"sm",onClick:()=>n(!m),className:"w-full",children:m?"Collapse List":`Show ${p} more assets`})]})}const B=document.getElementById("solana-balances-root");B&&P.createRoot(B).render(e.jsx(Q,{}));
