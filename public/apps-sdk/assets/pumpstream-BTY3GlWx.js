import{c as x,j as e,u as _,r as o}from"./use-openai-global-q52TwAFT.js";function l(...s){for(const r of s){if(typeof r=="number"&&Number.isFinite(r))return r;if(typeof r=="string"){const n=Number(r.replace(/%/g,""));if(Number.isFinite(n))return n}}}function j(s){return s===void 0?"—":s>=1e3?`${(s/1e3).toFixed(1)}K`:s.toString()}function v(s){return s===void 0?"—":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:0}).format(s)}function N(s){return s===void 0?"—":`${s>=0?"+":""}${s.toFixed(2)}%`}function f({symbol:s,size:r=48}){return e.jsx("div",{className:"pumpstream-token-icon",style:{width:r,height:r},children:e.jsx("span",{style:{fontSize:r*.35},children:s.slice(0,2).toUpperCase()})})}function g({stream:s,index:r}){const[n,a]=o.useState(!1),i=s.name||s.symbol||s.mintId||s.channel||`Stream ${r+1}`,c=l(s.currentViewers,s.viewer_count,s.viewers),m=l(s.marketCapUsd,s.market_cap_usd,s.marketCap),t=l(s.momentum,s.signal),d=t!==void 0&&t>=0,u=s.url||s.streamUrl||(s.mintId?`https://pump.fun/${s.mintId}`:void 0),h=s.thumbnail&&!n;return e.jsxs("a",{href:u,target:"_blank",rel:"noreferrer",className:"pumpstream-card",children:[e.jsxs("div",{className:"pumpstream-card__thumbnail",children:[h?e.jsx("img",{src:s.thumbnail,alt:i,onError:()=>a(!0),referrerPolicy:"no-referrer"}):e.jsx("div",{className:"pumpstream-card__thumbnail-fallback",children:e.jsx(f,{symbol:i,size:48})}),e.jsxs("div",{className:"pumpstream-card__live-badge",children:[e.jsx("span",{className:"pumpstream-card__live-dot"}),e.jsx("span",{children:"LIVE"})]}),c!==void 0&&e.jsxs("div",{className:"pumpstream-card__viewers",children:[e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),e.jsx("span",{children:j(c)})]})]}),e.jsxs("div",{className:"pumpstream-card__content",children:[e.jsxs("div",{className:"pumpstream-card__header",children:[e.jsx("span",{className:"pumpstream-card__title",children:i}),s.symbol&&e.jsx("span",{className:"pumpstream-card__symbol",children:s.symbol})]}),e.jsxs("div",{className:"pumpstream-card__metrics",children:[e.jsxs("div",{className:"pumpstream-card__metric",children:[e.jsx("span",{className:"pumpstream-card__metric-label",children:"MCAP"}),e.jsx("span",{className:"pumpstream-card__metric-value",children:v(m)})]}),t!==void 0&&e.jsxs("div",{className:"pumpstream-card__metric pumpstream-card__metric--right",children:[e.jsx("span",{className:"pumpstream-card__metric-label",children:"MOMENTUM"}),e.jsx("span",{className:`pumpstream-card__metric-value ${d?"pumpstream-card__metric-value--positive":"pumpstream-card__metric-value--negative"}`,children:N(t)})]})]})]})]})}function b(){const s=_("toolOutput"),[r,n]=o.useState(!1);if(!s)return e.jsx("div",{className:"pumpstream-container",children:e.jsxs("div",{className:"pumpstream-loading",children:[e.jsx("div",{className:"pumpstream-loading__spinner"}),e.jsx("span",{children:"Loading live streams..."})]})});const a=Array.isArray(s.streams)?s.streams:[];if(a.length===0)return e.jsx("div",{className:"pumpstream-container",children:e.jsx("div",{className:"pumpstream-empty",children:"No active Pump.fun streams detected."})});const i=r?a:a.slice(0,6),c=a.length-i.length;return e.jsxs("div",{className:"pumpstream-container",children:[e.jsxs("div",{className:"pumpstream-header",children:[e.jsx("span",{className:"pumpstream-title",children:"Live Streams"}),e.jsxs("div",{className:"pumpstream-header__badges",children:[e.jsxs("span",{className:"pumpstream-live-indicator",children:[e.jsx("span",{className:"pumpstream-live-indicator__dot"}),e.jsx("span",{className:"pumpstream-live-indicator__ping"}),e.jsx("span",{children:"Live"})]}),e.jsxs("span",{className:"pumpstream-count",children:[a.length," streams"]})]})]}),e.jsx("div",{className:"pumpstream-grid",children:i.map((m,t)=>e.jsx(g,{stream:m,index:t},m.mintId||m.url||`${m.name}-${t}`))}),c>0&&e.jsx("button",{className:"pumpstream-show-more",onClick:()=>n(!r),children:r?"Collapse":`Show ${c} more streams`})]})}const p=document.getElementById("pumpstream-root");p&&x.createRoot(p).render(e.jsx(b,{}));
