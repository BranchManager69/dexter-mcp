import{c as S,j as e,u as A}from"./use-openai-global-BDHbj7zS.js";import{u as z,a as E,b as F,A as c,C as p,E as I,G as B,F as u,S as C}from"./AppShell-SE9x5-lt.js";import{a as g,f as M,b as D}from"./utils-TtCzbpDq.js";function h({rating:t,max:r=5}){const a=[];for(let n=1;n<=r;n++)a.push(e.jsx("span",{style:{color:n<=t?"#f59e0b":"#d1d5db"},children:"★"},n));return e.jsx("span",{style:{fontSize:"16px"},children:a})}function G({feedback:t}){return e.jsxs("div",{style:{padding:"8px 12px",background:"var(--dexter-bg-secondary, #f5f5f5)",borderRadius:"6px",marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[e.jsx(h,{rating:t.rating??0}),e.jsx("span",{style:{fontSize:"11px",color:"var(--dexter-text-muted, #888)"},children:t.createdAt?D(t.createdAt):""})]}),t.comment&&e.jsx("p",{style:{fontSize:"13px",margin:"4px 0 0",color:"var(--dexter-text-secondary, #444)"},children:t.comment}),t.fromAgentId&&e.jsxs("span",{style:{fontSize:"11px",color:"var(--dexter-text-muted, #888)"},children:["From: ",g(t.fromAgentId)]})]})}function L(){const t=A("toolOutput"),r=z()??null,a=E(),n=F(),i=r?{maxHeight:r,overflow:"auto"}:void 0,j=a!=="fullscreen"&&typeof n=="function";if(!t)return e.jsx(c,{style:i,children:e.jsx(p,{title:"Reputation",badge:{label:"Loading"},children:e.jsx(I,{message:"Loading reputation..."})})});const{agentId:l,chain:d,score:f,totalRatings:y,averageRating:v,recentFeedback:o}=t,s=v??f??0,b=s>0?`${s.toFixed(1)} / 5`:"No ratings";return e.jsx(c,{style:i,children:e.jsxs(p,{title:"Agent Reputation",badge:{label:b},actions:j?e.jsx("button",{className:"dexter-link",onClick:()=>n?.({mode:"fullscreen"}),children:"Expand"}):null,children:[e.jsxs("div",{style:{textAlign:"center",padding:"16px 0"},children:[e.jsx("div",{style:{fontSize:"32px",marginBottom:"8px"},children:e.jsx(h,{rating:Math.round(s)})}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"var(--dexter-text-primary, #111)"},children:s>0?s.toFixed(1):"—"}),e.jsxs("div",{style:{fontSize:"13px",color:"var(--dexter-text-muted, #666)"},children:[y??0," ratings"]})]}),e.jsxs(B,{columns:2,children:[l&&e.jsx(u,{label:"Agent ID",value:g(l),code:!0}),d&&e.jsx(u,{label:"Chain",value:M(d)})]}),o&&o.length>0&&e.jsxs("div",{style:{marginTop:"16px"},children:[e.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"var(--dexter-text-secondary, #333)"},children:"Recent Feedback"}),o.slice(0,5).map((x,R)=>e.jsx(G,{feedback:x},x.id||R))]}),e.jsx(C,{children:e.jsx("span",{children:"ERC-8004 Reputation System"})})]})})}const m=document.getElementById("reputation-badge-root");m&&S.createRoot(m).render(e.jsx(L,{}));
