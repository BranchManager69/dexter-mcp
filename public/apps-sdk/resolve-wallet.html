<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Dexter Resolve Wallet</title>
  <style>
    :root { color-scheme: dark; font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; }
    body { margin: 0; padding: 16px; color: #e5e7eb; background: transparent; }
    .panel { border: 1px solid rgba(148, 163, 184, 0.35); border-radius: 10px; padding: 16px; background: rgba(30, 41, 59, 0.45); }
    .panel__title { margin: 0; font-size: 16px; font-weight: 600; }
    .panel__summary { margin-top: 12px; display: grid; gap: 12px; }
    .field { display: flex; flex-direction: column; gap: 4px; }
    .field__label { text-transform: uppercase; font-size: 11px; letter-spacing: 0.12em; color: #9ca3af; }
    .field__value { font-size: 13px; font-weight: 500; word-break: break-all; color: #f8fafc; }
    .badge { border-radius: 999px; padding: 4px 10px; font-size: 11px; background: rgba(94, 234, 212, 0.12); color: #5eead4; display: inline-flex; align-items: center; gap: 6px; width: fit-content; }
    .status { margin-top: 16px; font-size: 12px; color: #94a3b8; }
    .status__detail { margin-top: 4px; font-size: 12px; color: #cbd5f5; }
    .warning { color: #f9a8d4; }
  </style>
</head>
<body>
  <script type="module">
    import { registerComponent } from "https://cdn.jsdelivr.net/npm/@openai/app-ui@latest";

    const format = (text, fallback = "—") => {
      if (text === null || text === undefined) return fallback;
      const trimmed = String(text).trim();
      return trimmed.length ? trimmed : fallback;
    };

    registerComponent("dexter-mcp/resolve-wallet", (props = {}) => {
      const walletAddress = format(props.wallet_address);
      const source = format(props.source, "unknown");
      const userId = format(props.user_id);
      const detail = props.detail ? String(props.detail) : null;

      const badges = [`Source: ${source}`];
      if (props.bearer_source) {
        badges.push(`Bearer: ${format(props.bearer_source)}`);
      }

      return `
        <section class="panel">
          <header>
            <h2 class="panel__title">Active Dexter Wallet</h2>
            <div class="badge">${badges.join(" • ")}</div>
          </header>
          <div class="panel__summary">
            <div class="field">
              <span class="field__label">Wallet Address</span>
              <code class="field__value">${walletAddress}</code>
            </div>
            <div class="field">
              <span class="field__label">User ID</span>
              <span class="field__value">${userId}</span>
            </div>
          </div>
          <footer class="status">
            ${detail ? `<div class="status__detail">${detail}</div>` : "Resolved via Dexter MCP"}
          </footer>
        </section>
      `;
    });
  </script>
</body>
</html>
